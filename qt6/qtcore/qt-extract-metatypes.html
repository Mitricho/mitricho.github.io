<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- qt_extract_metatypes.qdoc -->
  <meta name="description" content="Extracts metatypes from a Qt target and generates an associated metatypes.json file.">
  <title>qt_extract_metatypes | Qt Core | Qt 6.9.0</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li>Qt 6.9</li>
<li><a href="qtcore-index.html">Qt Core</a></li>
<li><a href="cmake-commands-qtcore.html">CMake Commands in Qt6 Core</a></li>
<li>qt_extract_metatypes</li>
<li id="buildversion"><a href="qtcore-index.html">Qt 6.9.0 Reference Documentation</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#synopsis">Synopsis</a></li>
<li class="level1"><a href="#description">Description</a></li>
<li class="level1"><a href="#automatic-metatype-extraction">Automatic metatype extraction</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">qt_extract_metatypes</h1>
<!-- $$$qt-extract-metatypes.html-description -->
<div class="descr" id="details">
<p>Extracts metatypes from a Qt target and generates an associated metatypes.json file.</p>
<p>This command was introduced in Qt 6.0.</p>
<div class="admonition note">
<p><b>Note: </b>This command is in technology preview and may change in future releases.</p>
</div>
<h2 id="synopsis">Synopsis</h2>
<pre class="cpp plain" translate="no">
 qt_extract_metatypes(target
     [MANUAL_MOC_JSON_FILES json_files...]
     [OUTPUT_FILES variable_name]
 )
</pre>
<p>If versionless commands are disabled, use <code translate="no">qt6_extract_metatypes()</code> instead. It supports the same set of arguments as this command.</p>
<h2 id="description">Description</h2>
<p>Certain operations rely on metatype information being generated and collected on targets. This is typically handled internally by Qt commands, but for scenarios where this is not the case, <code translate="no">qt_extract_metatypes()</code> can be called to force the collection of this information for a specific <code translate="no">target</code>.</p>
<p>Metatype information is generated for a target's source files in one of the following ways:</p>
<ul>
<li>Automatically by AUTOMOC. The <code translate="no">qt_extract_metatypes()</code> command detects when AUTOMOC is enabled on the <code translate="no">target</code> and will automatically extract the information it needs.</li>
<li>Manually by invoking <code translate="no">moc</code> with the <code translate="no">--output-json</code> option. The project is responsible for keeping track of all the JSON files generated using this method and passing them to <code translate="no">qt_extract_metatypes()</code> with the <code translate="no">MANUAL_MOC_JSON_FILES</code> option.</li>
</ul>
<p><code translate="no">qt_extract_metatypes()</code> produces a target-specific metatypes JSON file which collects all the metatype details from the AUTOMOC and manual moc inputs. It does this by calling <code translate="no">moc</code> with the <code translate="no">--collect-json</code> option. If you need to know where to find the resultant metatypes JSON file (for example, to pass it to another command or to install it), use the <code translate="no">OUTPUT_FILES</code> option to provide the name of a variable in which to store its absolute path.</p>
<h2 id="automatic-metatype-extraction">Automatic metatype extraction</h2>
<p>Since Qt 6.8, if you have not disabled <code translate="no">AUTOMOC</code> and either are using CMake 3.19 or later or are calling <a href="qt-finalize-target.html">qt_finalize_target()</a> manually, then <code translate="no">qt_extract_metatypes()</code> is automatically called as part of the finalization step for <a href="qt-add-library.html">qt_add_library</a>. This has no effect if you have manually called <code translate="no">qt_extract_metatypes()</code> before the finalization, possibly with custom arguments. However, it does make sure that the metatypes are also produced if you haven't. This is important if any of the types in the library are used as part of any QML types any time in the future and has no downsides.</p>
<p>Furthermore, <a href="../qtqml/qt-add-qml-module.html">qt_add_qml_module</a> automatically invokes <code translate="no">qt_extract_metatypes()</code> for its target.</p>
</div>
<!-- @@@qt-extract-metatypes.html -->
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <abbr title="Copyright">&copy;</abbr> 2024 <span translate="no">The Qt Company Ltd.</span>
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the <span translate="no">Free Software Foundation</span>.<br/>    <span translate="no">Qt</span> and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of <span translate="no">The Qt Company Ltd.</span> in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
