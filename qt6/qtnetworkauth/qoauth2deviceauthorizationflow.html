<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- qoauth2deviceauthorizationflow.cpp -->
  <meta name="description" content="The QOAuth2DeviceAuthorizationFlow class provides an implementation of the Device Authorization Grant flow.">
  <title>QOAuth2DeviceAuthorizationFlow Class | Qt Network Authorization | Qt 6.9.0</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li>Qt 6.9</li>
<li><a href="qtnetworkauth-index.html">Qt Network Authorization</a></li>
<li><a href="qtnetworkauth-module.html" translate="no">C++ Classes</a></li>
<li>QOAuth2DeviceAuthorizationFlow</li>
<li id="buildversion"><a href="qtnetworkauth-index.html">Qt Network Authorization | Commercial or GPLv3</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#properties">Properties</a></li>
<li class="level1"><a href="#public-functions">Public Functions</a></li>
<li class="level1"><a href="#public-slots">Public Slots</a></li>
<li class="level1"><a href="#signals">Signals</a></li>
<li class="level1"><a href="#protected-slots">Protected Slots</a></li>
<li class="level1"><a href="#details">Detailed Description</a></li>
<li class="level2"><a href="#device-flow-usage">Device Flow Usage</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title" translate="no">QOAuth2DeviceAuthorizationFlow Class</h1>
<!-- $$$QOAuth2DeviceAuthorizationFlow-brief -->
<p>The QOAuth2DeviceAuthorizationFlow class provides an implementation of the <a href="https://datatracker.ietf.org/doc/html/rfc8628">Device Authorization Grant</a> flow. <a href="#details">More...</a></p>
<!-- @@@QOAuth2DeviceAuthorizationFlow -->
<div class="table"><table class="alignedsummary requisites" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> Header:</td><td class="memItemRight bottomAlign"> <code translate="no">#include &lt;QOAuth2DeviceAuthorizationFlow&gt;</code></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> CMake:</td><td class="memItemRight bottomAlign"> <code translate="no">find_package(Qt6 REQUIRED COMPONENTS NetworkAuth)</code><br/>
<code translate="no">target_link_libraries(mytarget PRIVATE Qt6::NetworkAuth)</code></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> qmake:</td><td class="memItemRight bottomAlign"> <code translate="no">QT += networkauth</code></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> Since:</td><td class="memItemRight bottomAlign"> Qt 6.9</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> Inherits:</td><td class="memItemRight bottomAlign"> <a href="qabstractoauth2.html" translate="no">QAbstractOAuth2</a></td></tr>
</table></div>
<ul>
<li><a href="qoauth2deviceauthorizationflow-members.html">List of all members, including inherited members</a></li>
</ul>
<h2 id="properties">Properties</h2>
<div class="table"><table class="propsummary" translate="no">
<tr><td class="topAlign"><ul>
<li class="fn" translate="no"><b><a href="qoauth2deviceauthorizationflow.html#completeVerificationUrl-prop" translate="no">completeVerificationUrl</a></b> : const QUrl</li>
<li class="fn" translate="no"><b><a href="qoauth2deviceauthorizationflow.html#polling-prop" translate="no">polling</a></b> : const bool</li>
<li class="fn" translate="no"><b><a href="qoauth2deviceauthorizationflow.html#userCode-prop" translate="no">userCode</a></b> : const QString</li>
</ul></td><td class="topAlign"><ul>
<li class="fn" translate="no"><b><a href="qoauth2deviceauthorizationflow.html#userCodeExpirationAt-prop" translate="no">userCodeExpirationAt</a></b> : const QDateTime</li>
<li class="fn" translate="no"><b><a href="qoauth2deviceauthorizationflow.html#verificationUrl-prop" translate="no">verificationUrl</a></b> : const QUrl</li>
</ul>
</td></tr>
</table></div>
<h2 id="public-functions">Public Functions</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qoauth2deviceauthorizationflow.html#QOAuth2DeviceAuthorizationFlow" translate="no">QOAuth2DeviceAuthorizationFlow</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qoauth2deviceauthorizationflow.html#QOAuth2DeviceAuthorizationFlow-1" translate="no">QOAuth2DeviceAuthorizationFlow</a></b>(QObject *<i>parent</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qoauth2deviceauthorizationflow.html#QOAuth2DeviceAuthorizationFlow-2" translate="no">QOAuth2DeviceAuthorizationFlow</a></b>(QNetworkAccessManager *<i>manager</i>, QObject *<i>parent</i> = nullptr)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual </td><td class="memItemRight bottomAlign"><b><a href="qoauth2deviceauthorizationflow.html#dtor.QOAuth2DeviceAuthorizationFlow" translate="no">~QOAuth2DeviceAuthorizationFlow</a></b>() override</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QUrl </td><td class="memItemRight bottomAlign"><b><a href="qoauth2deviceauthorizationflow.html#completeVerificationUrl-prop" translate="no">completeVerificationUrl</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="qoauth2deviceauthorizationflow.html#polling-prop" translate="no">isPolling</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QString </td><td class="memItemRight bottomAlign"><b><a href="qoauth2deviceauthorizationflow.html#userCode-prop" translate="no">userCode</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QDateTime </td><td class="memItemRight bottomAlign"><b><a href="qoauth2deviceauthorizationflow.html#userCodeExpirationAt-prop" translate="no">userCodeExpirationAt</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QUrl </td><td class="memItemRight bottomAlign"><b><a href="qoauth2deviceauthorizationflow.html#verificationUrl-prop" translate="no">verificationUrl</a></b>() const</td></tr>
</table></div>
<h2 id="public-slots">Public Slots</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> virtual void </td><td class="memItemRight bottomAlign"><b><a href="qoauth2deviceauthorizationflow.html#grant" translate="no">grant</a></b>() override</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="qoauth2deviceauthorizationflow.html#startTokenPolling" translate="no">startTokenPolling</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qoauth2deviceauthorizationflow.html#stopTokenPolling" translate="no">stopTokenPolling</a></b>()</td></tr>
</table></div>
<h2 id="signals">Signals</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qoauth2deviceauthorizationflow.html#authorizeWithUserCode" translate="no">authorizeWithUserCode</a></b>(const QUrl &amp;<i>verificationUrl</i>, const QString &amp;<i>userCode</i>, const QUrl &amp;<i>completeVerificationUrl</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qoauth2deviceauthorizationflow.html#completeVerificationUrl-prop" translate="no">completeVerificationUrlChanged</a></b>(const QUrl &amp;<i>completeVerificationUrl</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qoauth2deviceauthorizationflow.html#polling-prop" translate="no">pollingChanged</a></b>(bool <i>polling</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qoauth2deviceauthorizationflow.html#userCode-prop" translate="no">userCodeChanged</a></b>(const QString &amp;<i>userCode</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qoauth2deviceauthorizationflow.html#userCodeExpirationAt-prop" translate="no">userCodeExpirationAtChanged</a></b>(const QDateTime &amp;<i>expiration</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qoauth2deviceauthorizationflow.html#verificationUrl-prop" translate="no">verificationUrlChanged</a></b>(const QUrl &amp;<i>verificationUrl</i>)</td></tr>
</table></div>
<h2 id="protected-slots">Protected Slots</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> <code class="summary extra" translate="no">(since 6.9)</code> void </td><td class="memItemRight bottomAlign"><b><a href="qoauth2deviceauthorizationflow.html#refreshTokensImplementation" translate="no">refreshTokensImplementation</a></b>()</td></tr>
</table></div>
<!-- $$$QOAuth2DeviceAuthorizationFlow-description -->
<div class="descr">
<h2 id="details">Detailed Description</h2>
<p>This class implements the <a href="https://datatracker.ietf.org/doc/html/rfc8628">Device Authorization Grant</a> flow, which is used to obtain and refresh access tokens and ID tokens, particularly on devices lacking a user-agent or with limited input capabilities. These devices include televisions, machine HMIs, appliances, and IoT devices.</p>
<p>Device flow can be used on any platform and operating system that is capable of SSL/TLS requests. Unlike <a href="qoauth2authorizationcodeflow.html" translate="no">QOAuth2AuthorizationCodeFlow</a>, this flow is not based on redirects, and therefore does not use a <a href="qabstractoauthreplyhandler.html" translate="no">reply handler</a>.</p>
<h3 id="device-flow-usage">Device Flow Usage</h3>
<p>The following snippets illustrate the typical usage. First, we set up the flow similarly to <a href="qoauth2authorizationcodeflow.html" translate="no">QOAuth2AuthorizationCodeFlow</a>:</p>
<pre class="cpp" translate="no">
 m_deviceFlow<span class="operator">.</span>setAuthorizationUrl(<span class="type"><a href="../qtcore/qurl.html" translate="no">QUrl</a></span>(authorizationUrl));
 m_deviceFlow<span class="operator">.</span>setTokenUrl(<span class="type"><a href="../qtcore/qurl.html" translate="no">QUrl</a></span>(accessTokenUrl));
 m_deviceFlow<span class="operator">.</span>setRequestedScopeTokens({scope});
 m_deviceFlow<span class="operator">.</span>setClientIdentifier(clientIdentifier);
 <span class="comment">// The need for a client secret depends on the authorization server</span>
 m_deviceFlow<span class="operator">.</span>setClientIdentifierSharedKey(clientSecret);
</pre>
<p>Then we connect to <a href="qoauth2deviceauthorizationflow.html#authorizeWithUserCode" translate="no">authorizeWithUserCode</a> signal to handle the user authorization:</p>
<pre class="cpp" translate="no">
 connect(<span class="operator">&amp;</span>m_deviceFlow<span class="operator">,</span> <span class="operator">&amp;</span>QOAuth2DeviceAuthorizationFlow<span class="operator">::</span>authorizeWithUserCode<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span>
     <span class="operator">[</span><span class="operator">]</span>(<span class="keyword">const</span> <span class="type"><a href="../qtcore/qurl.html" translate="no">QUrl</a></span> <span class="operator">&amp;</span>verificationUrl<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> <span class="operator">&amp;</span>userCode<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="../qtcore/qurl.html" translate="no">QUrl</a></span> <span class="operator">&amp;</span>completeVerificationUrl) {
         <span class="keyword">if</span> (completeVerificationUrl<span class="operator">.</span>isValid()) {
             <span class="comment">// If the authorization server provided a complete URL</span>
             <span class="comment">// that already contains the necessary data as part of the URL parameters,</span>
             <span class="comment">// you can choose to use that</span>
             <a href="../qtcore/qtlogging.html#qDebug" translate="no">qDebug</a>() <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">&quot;Complete verification uri:&quot;</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> completeVerificationUrl;
         } <span class="keyword">else</span> {
             <span class="comment">// Authorization server provided only verification URL; use that</span>
             <a href="../qtcore/qtlogging.html#qDebug" translate="no">qDebug</a>() <span class="operator">&lt;</span><span class="operator">&lt;</span> <span class="string">&quot;Verification uri and usercode:&quot;</span> <span class="operator">&lt;</span><span class="operator">&lt;</span> verificationUrl <span class="operator">&lt;</span><span class="operator">&lt;</span> userCode;
         }
     }
 );
</pre>
<p>This part is crucial to the flow, and how you handle it depends on your specific use case. One way or another, the user needs to complete the authorization.</p>
<p>Device flow does not define how this authorization completion is done, making it versatile for different use cases. This can be achieved by displaying the verification URI and user code to the user, who can then navigate to it on another device. Alternatively, you could present a QR code for the user to scan with their mobile device, send to a companion application, email to the user, and so on.</p>
<p>While authorization is pending, <a href="qoauth2deviceauthorizationflow.html" translate="no">QOAuth2DeviceAuthorizationFlow</a> polls the server at specific intervals (typically 5 seconds) until the user accepts or rejects the authorization, upon which the server responds accordingly and the flow concludes.</p>
<p>Errors can be detected as follows:</p>
<pre class="cpp" translate="no">
 connect(<span class="operator">&amp;</span>m_deviceFlow<span class="operator">,</span> <span class="operator">&amp;</span><span class="type">QAbstractOAuth</span><span class="operator">::</span>requestFailed<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">[</span><span class="operator">]</span>(<span class="type">QAbstractOAuth</span><span class="operator">::</span>Error error) {
     Q_UNUSED(error);
     <span class="comment">// Handle error</span>
 });

 connect(<span class="operator">&amp;</span>m_deviceFlow<span class="operator">,</span> <span class="operator">&amp;</span>QAbstractOAuth2<span class="operator">::</span>serverReportedErrorOccurred<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span>
     <span class="operator">[</span><span class="operator">]</span>(<span class="keyword">const</span> <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> <span class="operator">&amp;</span>error<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> <span class="operator">&amp;</span>errorDescription<span class="operator">,</span> <span class="keyword">const</span> <span class="type"><a href="../qtcore/qurl.html" translate="no">QUrl</a></span> <span class="operator">&amp;</span>uri) {
         <span class="comment">// Check server reported error details if needed</span>
         Q_UNUSED(error);
         Q_UNUSED(errorDescription);
         Q_UNUSED(uri);
     }
 );
</pre>
<p><a href="qabstractoauth2.html#serverReportedErrorOccurred" translate="no">QAbstractOAuth2::serverReportedErrorOccurred</a>() signal can be used to get information on specific RFC-defined errors. However, unlike <a href="qabstractoauth.html#requestFailed" translate="no">QAbstractOAuth::requestFailed</a>(), it doesn't cover errors such as network errors or client configuration errors.</p>
<p>Flow completion is detected similarly as with <a href="qoauth2authorizationcodeflow.html" translate="no">QOAuth2AuthorizationCodeFlow</a>, for example:</p>
<pre class="cpp" translate="no">
 connect(<span class="operator">&amp;</span>m_deviceFlow<span class="operator">,</span> <span class="operator">&amp;</span><span class="type">QAbstractOAuth</span><span class="operator">::</span>granted<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">]</span>(){
     <span class="comment">// Here we use QNetworkRequestFactory to store the access token</span>
     m_api<span class="operator">.</span>setBearerToken(m_deviceFlow<span class="operator">.</span>token()<span class="operator">.</span>toLatin1());
 });
 m_deviceFlow<span class="operator">.</span>grant();
</pre>
</div>
<!-- @@@QOAuth2DeviceAuthorizationFlow -->
<div class="prop">
<h2>Property Documentation</h2>
<!-- $$$completeVerificationUrl-prop$$$completeVerificationUrl$$$completeVerificationUrlChangedconstQUrl& -->
<h3 class="fn" translate="no" id="completeVerificationUrl-prop"><code class="details extra" translate="no">[read-only]</code> <span class="name">completeVerificationUrl</span> : const <span class="type"><a href="../qtcore/qurl.html" translate="no">QUrl</a></span></h3>
<p>This property holds an URL for user to complete the authorization. The URL itself contains the <code translate="no">user_code</code> and thus avoids the need for user to enter the code manually. Support for this complete URL varies between authorization servers.</p>
<p><b>Access functions:</b></p>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft topAlign rightAlign"> QUrl </td><td class="memItemRight bottomAlign"><span class="name"><b>completeVerificationUrl</b></span>() const</td></tr>
</table></div>
<p><b>Notifier signal:</b></p>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft topAlign rightAlign"> void </td><td class="memItemRight bottomAlign"><span class="name"><b>completeVerificationUrlChanged</b></span>(const QUrl &amp;<i>completeVerificationUrl</i>)</td></tr>
</table></div>
<p><b>See also </b><a href="qoauth2deviceauthorizationflow.html#verificationUrl-prop" translate="no">verificationUrl</a> and <a href="qoauth2deviceauthorizationflow.html#device-flow-usage" translate="no">Device Flow Usage</a>.</p>
<!-- @@@completeVerificationUrl -->
<!-- $$$polling-prop$$$isPolling$$$pollingChangedbool -->
<h3 class="fn" translate="no" id="polling-prop"><code class="details extra" translate="no">[read-only]</code> <span class="name">polling</span> : const <span class="type">bool</span></h3>
<p>This property holds whether or not the flow is actively polling for tokens.</p>
<p><b>Access functions:</b></p>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft topAlign rightAlign"> bool </td><td class="memItemRight bottomAlign"><span class="name"><b>isPolling</b></span>() const</td></tr>
</table></div>
<p><b>Notifier signal:</b></p>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft topAlign rightAlign"> void </td><td class="memItemRight bottomAlign"><span class="name"><b>pollingChanged</b></span>(bool <i>polling</i>)</td></tr>
</table></div>
<p><b>See also </b><a href="qoauth2deviceauthorizationflow.html#startTokenPolling" translate="no">startTokenPolling</a>() and <a href="qoauth2deviceauthorizationflow.html#stopTokenPolling" translate="no">stopTokenPolling</a>().</p>
<!-- @@@polling -->
<!-- $$$userCode-prop$$$userCode$$$userCodeChangedconstQString& -->
<h3 class="fn" translate="no" id="userCode-prop"><code class="details extra" translate="no">[read-only]</code> <span class="name">userCode</span> : const <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span></h3>
<p>This property holds the <a href="https://datatracker.ietf.org/doc/html/rfc8628#section-3.2">user_code</a> received in authorization response. This code is used by the user to complete the authorization.</p>
<p><b>Access functions:</b></p>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft topAlign rightAlign"> QString </td><td class="memItemRight bottomAlign"><span class="name"><b>userCode</b></span>() const</td></tr>
</table></div>
<p><b>Notifier signal:</b></p>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft topAlign rightAlign"> void </td><td class="memItemRight bottomAlign"><span class="name"><b>userCodeChanged</b></span>(const QString &amp;<i>userCode</i>)</td></tr>
</table></div>
<p><b>See also </b><a href="qoauth2deviceauthorizationflow.html#verificationUrl-prop" translate="no">verificationUrl</a>, <a href="qoauth2deviceauthorizationflow.html#completeVerificationUrl-prop" translate="no">completeVerificationUrl</a>, and <a href="qoauth2deviceauthorizationflow.html#device-flow-usage" translate="no">Device Flow Usage</a>.</p>
<!-- @@@userCode -->
<!-- $$$userCodeExpirationAt-prop$$$userCodeExpirationAt$$$userCodeExpirationAtChangedconstQDateTime& -->
<h3 class="fn" translate="no" id="userCodeExpirationAt-prop"><code class="details extra" translate="no">[read-only]</code> <span class="name">userCodeExpirationAt</span> : const <span class="type"><a href="../qtcore/qdatetime.html" translate="no">QDateTime</a></span></h3>
<p>This property holds the local time the user code and underlying device codes expire. The codes are typically valid between 5 and 30 minutes.</p>
<p><b>Access functions:</b></p>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft topAlign rightAlign"> QDateTime </td><td class="memItemRight bottomAlign"><span class="name"><b>userCodeExpirationAt</b></span>() const</td></tr>
</table></div>
<p><b>Notifier signal:</b></p>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft topAlign rightAlign"> void </td><td class="memItemRight bottomAlign"><span class="name"><b>userCodeExpirationAtChanged</b></span>(const QDateTime &amp;<i>expiration</i>)</td></tr>
</table></div>
<p><b>See also </b><a href="qoauth2deviceauthorizationflow.html#userCode-prop" translate="no">userCode</a>.</p>
<!-- @@@userCodeExpirationAt -->
<!-- $$$verificationUrl-prop$$$verificationUrl$$$verificationUrlChangedconstQUrl& -->
<h3 class="fn" translate="no" id="verificationUrl-prop"><code class="details extra" translate="no">[read-only]</code> <span class="name">verificationUrl</span> : const <span class="type"><a href="../qtcore/qurl.html" translate="no">QUrl</a></span></h3>
<p>This property holds the URL where user should enter the user code to complete authorization.</p>
<p><b>Access functions:</b></p>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft topAlign rightAlign"> QUrl </td><td class="memItemRight bottomAlign"><span class="name"><b>verificationUrl</b></span>() const</td></tr>
</table></div>
<p><b>Notifier signal:</b></p>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft topAlign rightAlign"> void </td><td class="memItemRight bottomAlign"><span class="name"><b>verificationUrlChanged</b></span>(const QUrl &amp;<i>verificationUrl</i>)</td></tr>
</table></div>
<p><b>See also </b><a href="qoauth2deviceauthorizationflow.html#userCode-prop" translate="no">userCode</a>, <a href="qoauth2deviceauthorizationflow.html#completeVerificationUrl-prop" translate="no">completeVerificationUrl</a>, and <a href="qoauth2deviceauthorizationflow.html#device-flow-usage" translate="no">Device Flow Usage</a>.</p>
<!-- @@@verificationUrl -->
</div>
<div class="func">
<h2>Member Function Documentation</h2>
<!-- $$$QOAuth2DeviceAuthorizationFlow[overload1]$$$QOAuth2DeviceAuthorizationFlow -->
<h3 class="fn" translate="no" id="QOAuth2DeviceAuthorizationFlow">QOAuth2DeviceAuthorizationFlow::<span class="name">QOAuth2DeviceAuthorizationFlow</span>()</h3>
<p>Constructs a QOAuth2DeviceAuthorizationFlow object.</p>
<!-- @@@QOAuth2DeviceAuthorizationFlow -->
<!-- $$$QOAuth2DeviceAuthorizationFlow$$$QOAuth2DeviceAuthorizationFlowQObject* -->
<h3 class="fn" translate="no" id="QOAuth2DeviceAuthorizationFlow-1"><code class="details extra" translate="no">[explicit]</code> QOAuth2DeviceAuthorizationFlow::<span class="name">QOAuth2DeviceAuthorizationFlow</span>(<span class="type"><a href="../qtcore/qobject.html#QObject" translate="no">QObject</a></span> *<i>parent</i>)</h3>
<p>Constructs a QOAuth2DeviceAuthorizationFlow object with parent object <i translate="no">parent</i>.</p>
<!-- @@@QOAuth2DeviceAuthorizationFlow -->
<!-- $$$QOAuth2DeviceAuthorizationFlow$$$QOAuth2DeviceAuthorizationFlowQNetworkAccessManager*QObject* -->
<h3 class="fn" translate="no" id="QOAuth2DeviceAuthorizationFlow-2"><code class="details extra" translate="no">[explicit]</code> QOAuth2DeviceAuthorizationFlow::<span class="name">QOAuth2DeviceAuthorizationFlow</span>(<span class="type"><a href="../qtnetwork/qnetworkaccessmanager.html" translate="no">QNetworkAccessManager</a></span> *<i>manager</i>, <span class="type"><a href="../qtcore/qobject.html#QObject" translate="no">QObject</a></span> *<i>parent</i> = nullptr)</h3>
<p>Constructs a QOAuth2DeviceAuthorizationFlow object using <i translate="no">parent</i> as parent and sets <i translate="no">manager</i> as the network access manager.</p>
<!-- @@@QOAuth2DeviceAuthorizationFlow -->
<!-- $$$~QOAuth2DeviceAuthorizationFlow[overload1]$$$~QOAuth2DeviceAuthorizationFlow -->
<h3 class="fn" translate="no" id="dtor.QOAuth2DeviceAuthorizationFlow"><code class="details extra" translate="no">[override virtual noexcept]</code> QOAuth2DeviceAuthorizationFlow::<span class="name">~QOAuth2DeviceAuthorizationFlow</span>()</h3>
<p>Destroys the <a href="qoauth2deviceauthorizationflow.html" translate="no">QOAuth2DeviceAuthorizationFlow</a> instance.</p>
<!-- @@@~QOAuth2DeviceAuthorizationFlow -->
<!-- $$$authorizeWithUserCode[overload1]$$$authorizeWithUserCodeconstQUrl&constQString&constQUrl& -->
<h3 class="fn" translate="no" id="authorizeWithUserCode"><code class="details extra" translate="no">[signal]</code> <span class="type">void</span> QOAuth2DeviceAuthorizationFlow::<span class="name">authorizeWithUserCode</span>(const <span class="type"><a href="../qtcore/qurl.html" translate="no">QUrl</a></span> &amp;<i>verificationUrl</i>, const <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> &amp;<i>userCode</i>, const <span class="type"><a href="../qtcore/qurl.html" translate="no">QUrl</a></span> &amp;<i>completeVerificationUrl</i>)</h3>
<p>This signal is emitted when user should complete the authorization.</p>
<p>If authorization server has provided <i translate="no">completeVerificationUrl</i>, user can navigate to that URL. The URL contains the needed <i translate="no">userCode</i> and any other needed parameters.</p>
<p>Alternatively, the user needs to navigate to <i translate="no">verificationUrl</i> and enter <i translate="no">userCode</i> manually.</p>
<p><b>See also </b><a href="qoauth2deviceauthorizationflow.html#device-flow-usage" translate="no">Device Flow Usage</a>.</p>
<!-- @@@authorizeWithUserCode -->
<!-- $$$grant[overload1]$$$grant -->
<h3 class="fn" translate="no" id="grant"><code class="details extra" translate="no">[override virtual slot]</code> <span class="type">void</span> QOAuth2DeviceAuthorizationFlow::<span class="name">grant</span>()</h3>
<p>Reimplements: <a href="qabstractoauth.html#grant" translate="no">QAbstractOAuth::grant</a>().</p>
<p>Starts the authorization flow as described in <a href="https://datatracker.ietf.org/doc/html/rfc8628#section-3">Device Grant RFC</a>.</p>
<p>The flow consists of following steps:</p>
<ul>
<li>Authorization request to the authorization server</li>
<li>User authorizing the access, see <a href="qoauth2deviceauthorizationflow.html#authorizeWithUserCode" translate="no">authorizeWithUserCode</a>()</li>
<li>Polling the authorization server until user has accepted or rejected the authorization (or codes expire)</li>
<li>Indicating the result to the application (see <a href="qabstractoauth.html#granted" translate="no">granted</a>() and <a href="qabstractoauth.html#requestFailed" translate="no">QAbstractOAuth::requestFailed</a>())</li>
</ul>
<p>The flow progresses automatically from authorization to token polling.</p>
<p>Calling this function will reset any previous authorization data.</p>
<p><b>See also </b><a href="qoauth2deviceauthorizationflow.html#authorizeWithUserCode" translate="no">authorizeWithUserCode</a>(), <a href="qabstractoauth.html#granted" translate="no">granted</a>(), <a href="qabstractoauth.html#requestFailed" translate="no">QAbstractOAuth::requestFailed</a>(), <a href="qoauth2deviceauthorizationflow.html#polling-prop" translate="no">polling</a>, <a href="qoauth2deviceauthorizationflow.html#startTokenPolling" translate="no">startTokenPolling</a>(), <a href="qoauth2deviceauthorizationflow.html#stopTokenPolling" translate="no">stopTokenPolling</a>(), and <a href="qoauth2deviceauthorizationflow.html#device-flow-usage" translate="no">Device Flow Usage</a>.</p>
<!-- @@@grant -->
<!-- $$$refreshTokensImplementation[overload1]$$$refreshTokensImplementation -->
<h3 class="fn" translate="no" id="refreshTokensImplementation"><code class="details extra" translate="no">[protected slot, since 6.9]</code> <span class="type">void</span> QOAuth2DeviceAuthorizationFlow::<span class="name">refreshTokensImplementation</span>()</h3>
<p>This function sends a token refresh request.</p>
<p>If the refresh request was initiated successfully, the status is set to <a href="qabstractoauth.html#Status-enum" translate="no">QAbstractOAuth::Status::RefreshingToken</a>; otherwise the <a href="qabstractoauth.html#requestFailed" translate="no">requestFailed</a>() signal is emitted and the status is not changed. Tokens cannot be refreshed while <a href="qoauth2deviceauthorizationflow.html#polling-prop" translate="no">isPolling</a> is <code translate="no">true</code>.</p>
<p>This function has no effect if the token refresh process is already in progress.</p>
<p>If refreshing the token fails and an access token exists, the status is set to <a href="qabstractoauth.html#Status-enum" translate="no">QAbstractOAuth::Status::Granted</a>, and to <a href="qabstractoauth.html#Status-enum" translate="no">QAbstractOAuth::Status::NotAuthenticated</a> if an access token does not exist.</p>
<p>This function was introduced in Qt 6.9.</p>
<p><b>See also </b><a href="qabstractoauth.html#requestFailed" translate="no">QAbstractOAuth::requestFailed</a>() and <a href="qabstractoauth2.html#refreshTokens" translate="no">QAbstractOAuth2::refreshTokens</a>().</p>
<!-- @@@refreshTokensImplementation -->
<!-- $$$startTokenPolling[overload1]$$$startTokenPolling -->
<h3 class="fn" translate="no" id="startTokenPolling"><code class="details extra" translate="no">[slot]</code> <span class="type">bool</span> QOAuth2DeviceAuthorizationFlow::<span class="name">startTokenPolling</span>()</h3>
<p>Starts token polling. Returns <code translate="no">true</code> if the start was successful (or was already active), and <code translate="no">false</code> otherwise.</p>
<p>Calling this function is not necessary in a typical use case. Once the authorization request has completed, as a result of <a href="qoauth2deviceauthorizationflow.html#grant" translate="no">grant</a>() call, the polling is started automatically.</p>
<p>This function can be useful in cases where resuming (retrying) the token polling a bit later is needed, without restarting the whole authorization flow. For example in case of a transient network connectivity loss.</p>
<p>Polling interval is defined by the authorization server, and is typically 5 seconds. First poll request is sent once the first interval has elapsed.</p>
<p><b>See also </b><a href="qoauth2deviceauthorizationflow.html#polling-prop" translate="no">polling</a>, <a href="qoauth2deviceauthorizationflow.html#stopTokenPolling" translate="no">stopTokenPolling</a>(), and <a href="qoauth2deviceauthorizationflow.html#device-flow-usage" translate="no">Device Flow Usage</a>.</p>
<!-- @@@startTokenPolling -->
<!-- $$$stopTokenPolling[overload1]$$$stopTokenPolling -->
<h3 class="fn" translate="no" id="stopTokenPolling"><code class="details extra" translate="no">[slot]</code> <span class="type">void</span> QOAuth2DeviceAuthorizationFlow::<span class="name">stopTokenPolling</span>()</h3>
<p>Stops token polling. Any potential outstanding poll requests are silently discarded.</p>
<p><b>See also </b><a href="qoauth2deviceauthorizationflow.html#polling-prop" translate="no">polling</a> and <a href="qoauth2deviceauthorizationflow.html#startTokenPolling" translate="no">startTokenPolling</a>().</p>
<!-- @@@stopTokenPolling -->
</div>
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <abbr title="Copyright">&copy;</abbr> 2024 <span translate="no">The Qt Company Ltd.</span>
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the <span translate="no">Free Software Foundation</span>.<br/>    <span translate="no">Qt</span> and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of <span translate="no">The Qt Company Ltd.</span> in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
