<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- qoauthhttpserverreplyhandler.cpp -->
  <meta name="description" content="Handles loopback redirects by setting up a local HTTP server.">
  <title>QOAuthHttpServerReplyHandler Class | Qt Network Authorization | Qt 6.9.0</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li>Qt 6.9</li>
<li><a href="qtnetworkauth-index.html">Qt Network Authorization</a></li>
<li><a href="qtnetworkauth-module.html" translate="no">C++ Classes</a></li>
<li>QOAuthHttpServerReplyHandler</li>
<li id="buildversion"><a href="qtnetworkauth-index.html">Qt Network Authorization | Commercial or GPLv3</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#public-functions">Public Functions</a></li>
<li class="level1"><a href="#details">Detailed Description</a></li>
<li class="level2"><a href="#ipv4-and-ipv6">IPv4 and IPv6</a></li>
<li class="level2"><a href="#http-and-https-callbacks">HTTP and HTTPS Callbacks</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title" translate="no">QOAuthHttpServerReplyHandler Class</h1>
<!-- $$$QOAuthHttpServerReplyHandler-brief -->
<p>Handles loopback redirects by setting up a local HTTP server. <a href="#details">More...</a></p>
<!-- @@@QOAuthHttpServerReplyHandler -->
<div class="table"><table class="alignedsummary requisites" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> Header:</td><td class="memItemRight bottomAlign"> <code translate="no">#include &lt;QOAuthHttpServerReplyHandler&gt;</code></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> CMake:</td><td class="memItemRight bottomAlign"> <code translate="no">find_package(Qt6 REQUIRED COMPONENTS NetworkAuth)</code><br/>
<code translate="no">target_link_libraries(mytarget PRIVATE Qt6::NetworkAuth)</code></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> qmake:</td><td class="memItemRight bottomAlign"> <code translate="no">QT += networkauth</code></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> Inherits:</td><td class="memItemRight bottomAlign"> QOAuthOobReplyHandler</td></tr>
</table></div>
<ul>
<li><a href="qoauthhttpserverreplyhandler-members.html">List of all members, including inherited members</a></li>
</ul>
<h2 id="public-functions">Public Functions</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qoauthhttpserverreplyhandler.html#QOAuthHttpServerReplyHandler" translate="no">QOAuthHttpServerReplyHandler</a></b>(QObject *<i>parent</i> = nullptr)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qoauthhttpserverreplyhandler.html#QOAuthHttpServerReplyHandler-1" translate="no">QOAuthHttpServerReplyHandler</a></b>(quint16 <i>port</i>, QObject *<i>parent</i> = nullptr)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qoauthhttpserverreplyhandler.html#QOAuthHttpServerReplyHandler-2" translate="no">QOAuthHttpServerReplyHandler</a></b>(const QHostAddress &amp;<i>address</i>, quint16 <i>port</i>, QObject *<i>parent</i> = nullptr)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> virtual </td><td class="memItemRight bottomAlign"><b><a href="qoauthhttpserverreplyhandler.html#dtor.QOAuthHttpServerReplyHandler" translate="no">~QOAuthHttpServerReplyHandler</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> <code class="summary extra" translate="no">(since 6.9)</code> QString </td><td class="memItemRight bottomAlign"><b><a href="qoauthhttpserverreplyhandler.html#callbackHost" translate="no">callbackHost</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QString </td><td class="memItemRight bottomAlign"><b><a href="qoauthhttpserverreplyhandler.html#callbackPath" translate="no">callbackPath</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QString </td><td class="memItemRight bottomAlign"><b><a href="qoauthhttpserverreplyhandler.html#callbackText" translate="no">callbackText</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qoauthhttpserverreplyhandler.html#close" translate="no">close</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="qoauthhttpserverreplyhandler.html#isListening" translate="no">isListening</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="qoauthhttpserverreplyhandler.html#listen" translate="no">listen</a></b>(const QHostAddress &amp;<i>address</i> = QHostAddress::Any, quint16 <i>port</i> = 0)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> bool </td><td class="memItemRight bottomAlign"><b><a href="qoauthhttpserverreplyhandler.html#listen-1" translate="no">listen</a></b>(const QSslConfiguration &amp;<i>configuration</i>, const QHostAddress &amp;<i>address</i> = QHostAddress::Any, quint16 <i>port</i> = 0)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> quint16 </td><td class="memItemRight bottomAlign"><b><a href="qoauthhttpserverreplyhandler.html#port" translate="no">port</a></b>() const</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> <code class="summary extra" translate="no">(since 6.9)</code> void </td><td class="memItemRight bottomAlign"><b><a href="qoauthhttpserverreplyhandler.html#setCallbackHost" translate="no">setCallbackHost</a></b>(const QString &amp;<i>host</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qoauthhttpserverreplyhandler.html#setCallbackPath" translate="no">setCallbackPath</a></b>(const QString &amp;<i>path</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> void </td><td class="memItemRight bottomAlign"><b><a href="qoauthhttpserverreplyhandler.html#setCallbackText" translate="no">setCallbackText</a></b>(const QString &amp;<i>text</i>)</td></tr>
</table></div>
<!-- $$$QOAuthHttpServerReplyHandler-description -->
<div class="descr">
<h2 id="details">Detailed Description</h2>
<p>This class serves as a reply handler for <a href="https://datatracker.ietf.org/doc/html/rfc6749">OAuth 2.0</a> authorization processes that use <a href="https://datatracker.ietf.org/doc/html/rfc8252#section-7.3">loopback redirection</a>.</p>
<p>The <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-3.1.2">redirect URI</a> is where the authorization server redirects the user-agent (typically, and preferably, the system browser) once the authorization part of the flow is complete. Loopback redirect URIs use <code translate="no">http</code> as the scheme and either <i>localhost</i> or an IP address literal as the host (see <a href="qoauthhttpserverreplyhandler.html#ipv4-and-ipv6" translate="no">IPv4 and IPv6</a>).</p>
<p>QOAuthHttpServerReplyHandler sets up a localhost server. Once the authorization server redirects the browser to this localhost address, the reply handler parses the redirection URI query parameters, and then signals authorization completion with <a href="qabstractoauthreplyhandler.html#callbackReceived" translate="no">a signal</a>.</p>
<p>To handle other redirect URI schemes, see <a href="qoauthurischemereplyhandler.html" translate="no">QOAuthUriSchemeReplyHandler</a>.</p>
<p>The following code illustrates the usage. First, the needed variables:</p>
<pre class="cpp" translate="no">
 QOAuth2AuthorizationCodeFlow m_oauth;
 <span class="type"><a href="qoauthhttpserverreplyhandler.html#QOAuthHttpServerReplyHandler" translate="no">QOAuthHttpServerReplyHandler</a></span> <span class="operator">*</span>m_handler <span class="operator">=</span> nullptr;
</pre>
<p>Followed up by the OAuth setup (error handling omitted for brevity):</p>
<pre class="cpp" translate="no">
 m_oauth<span class="operator">.</span>setAuthorizationUrl(<span class="type"><a href="../qtcore/qurl.html" translate="no">QUrl</a></span>(authorizationUrl));
 m_oauth<span class="operator">.</span>setTokenUrl(<span class="type"><a href="../qtcore/qurl.html" translate="no">QUrl</a></span>(accessTokenUrl));
 m_oauth<span class="operator">.</span>setClientIdentifier(clientIdentifier);
 m_oauth<span class="operator">.</span>setRequestedScopeTokens({scope});

 m_handler <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qoauthhttpserverreplyhandler.html#QOAuthHttpServerReplyHandler" translate="no">QOAuthHttpServerReplyHandler</a></span>(<span class="number">1234</span><span class="operator">,</span> <span class="keyword">this</span>);

 connect(<span class="operator">&amp;</span>m_oauth<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qabstractoauth.html" translate="no">QAbstractOAuth</a></span><span class="operator">::</span>authorizeWithBrowser<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="../qtgui/qdesktopservices.html" translate="no">QDesktopServices</a></span><span class="operator">::</span>openUrl);
 connect(<span class="operator">&amp;</span>m_oauth<span class="operator">,</span> <span class="operator">&amp;</span><span class="type"><a href="qabstractoauth.html" translate="no">QAbstractOAuth</a></span><span class="operator">::</span>granted<span class="operator">,</span> <span class="keyword">this</span><span class="operator">,</span> <span class="operator">[</span><span class="keyword">this</span><span class="operator">]</span>() {
     <span class="comment">// Here we use QNetworkRequestFactory to store the access token</span>
     m_api<span class="operator">.</span>setBearerToken(m_oauth<span class="operator">.</span>token()<span class="operator">.</span>toLatin1());
     m_handler<span class="operator">-</span><span class="operator">&gt;</span>close();
 });
</pre>
<p>Finally, we then set up the URI scheme reply-handler:</p>
<pre class="cpp" translate="no">
 m_oauth<span class="operator">.</span>setReplyHandler(m_handler);

 <span class="comment">// Initiate the authorization</span>
 <span class="keyword">if</span> (m_handler<span class="operator">-</span><span class="operator">&gt;</span>isListening()) {
     m_oauth<span class="operator">.</span>grant();
 }
</pre>
<h3 id="ipv4-and-ipv6">IPv4 and IPv6</h3>
<p>If the handler is an <i>any</i> address handler (<a href="../qtnetwork/qhostaddress.html#SpecialAddress-enum" translate="no">AnyIPv4, AnyIPv6, or Any</a>), the used callback is in the form of <code translate="no">http://localhost:{port}/{path}</code>. Handler will first attempt to listen on IPv4 loopback address, and then on IPv6. <code translate="no">localhost</code> is used because it resolves correctly on both IPv4 and IPv6 interfaces.</p>
<p>For loopback addresses (<a href="../qtnetwork/qhostaddress.html#SpecialAddress-enum" translate="no">LocalHost or LocalHostIPv6</a>) the IP literals (<code translate="no">127.0.0.1</code> and <code translate="no">::1</code>) are used.</p>
<p>For specific IP addresses the provided IP literal is used directly, for instance: <i>http://192.168.0.123:{port}/{path}</i> in the case of an IPv4 address.</p>
<p>It's also possible to specify the host part of the callback URL manually with <a href="qoauthhttpserverreplyhandler.html#setCallbackHost" translate="no">setCallbackHost</a>(). For instance you can specify the callback to be <code translate="no">localhost.localnet</code>. Naturally you need to ensure that such address is reachable upon redirection.</p>
<pre class="cpp" translate="no">
 <span class="keyword">auto</span> replyHandler <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qoauthhttpserverreplyhandler.html#QOAuthHttpServerReplyHandler" translate="no">QOAuthHttpServerReplyHandler</a></span>(<span class="type"><a href="../qtnetwork/qhostaddress.html" translate="no">QHostAddress</a></span><span class="operator">::</span>LocalHost<span class="operator">,</span> <span class="number">1337</span><span class="operator">,</span> <span class="keyword">this</span>);
 replyHandler<span class="operator">-</span><span class="operator">&gt;</span>setCallbackHost(<span class="string">&quot;localhost.localnet&quot;</span>_L1);
</pre>
<h3 id="http-and-https-callbacks">HTTP and HTTPS Callbacks</h3>
<p>Since Qt 6.9 it's possible to configure the handler to use <code translate="no">https</code> URI scheme instead of <code translate="no">http</code>. This is done by providing an appropriate <a href="../qtnetwork/qsslconfiguration.html" translate="no">QSslConfiguration</a> when calling <a href="qoauthhttpserverreplyhandler.html#listen-1" translate="no">listen</a>(). Internally the handler will then use <a href="../qtnetwork/qsslserver.html" translate="no">QSslServer</a>, and the callback (redirect URL) will be of the form <i>https://{host}:{port}/{path}</i>.</p>
<p>Following example illustrates this:</p>
<pre class="cpp" translate="no">
 <span class="comment">// Read certificate and private key</span>
 <span class="keyword">auto</span> certificates <span class="operator">=</span> <span class="type"><a href="../qtnetwork/qsslcertificate.html" translate="no">QSslCertificate</a></span><span class="operator">::</span>fromPath(sslCertificateFile);
 <span class="type"><a href="../qtcore/qfile.html" translate="no">QFile</a></span> keyFile(sslPrivateKeyFile);
 <span class="keyword">if</span> (<span class="operator">!</span>keyFile<span class="operator">.</span>open(<span class="type"><a href="../qtcore/qfile.html" translate="no">QFile</a></span><span class="operator">::</span>ReadOnly)) {
     <a href="../qtcore/qtlogging.html#qWarning" translate="no">qWarning</a>(<span class="string">&quot;Cannot open key file&quot;</span>);
     <span class="keyword">return</span>;
 }
 <span class="type"><a href="../qtnetwork/qsslkey.html" translate="no">QSslKey</a></span> privateKey(<span class="operator">&amp;</span>keyFile<span class="operator">,</span> <span class="type">QSsl</span><span class="operator">::</span>Rsa<span class="operator">,</span> <span class="type">QSsl</span><span class="operator">::</span>Pem);
 <span class="keyword">if</span> (certificates<span class="operator">.</span>size() <span class="operator">=</span><span class="operator">=</span> <span class="number">0</span> <span class="operator">|</span><span class="operator">|</span> privateKey<span class="operator">.</span>isNull()) {
     <a href="../qtcore/qtlogging.html#qWarning" translate="no">qWarning</a>(<span class="string">&quot;SSL certificate data invalid&quot;</span>);
     <span class="keyword">return</span>;
 }

 <span class="comment">// Create SSL configuration</span>
 <span class="type"><a href="../qtnetwork/qsslconfiguration.html" translate="no">QSslConfiguration</a></span> configuration <span class="operator">=</span> <span class="type"><a href="../qtnetwork/qsslconfiguration.html" translate="no">QSslConfiguration</a></span><span class="operator">::</span>defaultConfiguration();
 configuration<span class="operator">.</span>setLocalCertificate(certificates<span class="operator">.</span>at(<span class="number">0</span>));
 configuration<span class="operator">.</span>setPrivateKey(privateKey);

 <span class="comment">// Instantiate handler with the SSL configuration</span>
 m_handler <span class="operator">=</span> <span class="keyword">new</span> <span class="type"><a href="qoauthhttpserverreplyhandler.html#QOAuthHttpServerReplyHandler" translate="no">QOAuthHttpServerReplyHandler</a></span>(<span class="number">1234</span><span class="operator">,</span> <span class="keyword">this</span>);
 m_handler<span class="operator">-</span><span class="operator">&gt;</span>listen(configuration);
</pre>
<p>When possible, it is recommended to use other redirect URI options, see <a href="qt-oauth2-overview.html#choosing-a-reply-handler">Choosing A Reply Handler</a> and <a href="qt-oauth2-browsersupport.html">Qt OAuth2 Browser Support</a>.</p>
<p>The primary use cases for a localhost <code translate="no">https</code> handler should be limited to development-time, or tightly controlled and provisioned environments. For example, some Authorization Servers won't allow plain <code translate="no">http</code> redirect URIs at all, in which case this can add to development convenience.</p>
<p>From security perspective, while using SSL/TLS does encrypt the localhost traffic, OAuth2 has also other security mechanisms in place such as <a href="qoauth2authorizationcodeflow.html#PkceMethod-enum" translate="no">PKCE</a>. Under no circumstances you should distribute private certificate keys along with the application.</p>
<div class="admonition note">
<p><b>Note: </b>Browsers will issue severe warnings if the certificate is not trusted. This is typical with self-signed certificates, whose use should be limited to development-time.</p>
</div>
</div>
<!-- @@@QOAuthHttpServerReplyHandler -->
<div class="func">
<h2>Member Function Documentation</h2>
<!-- $$$QOAuthHttpServerReplyHandler[overload1]$$$QOAuthHttpServerReplyHandlerQObject* -->
<h3 class="fn" translate="no" id="QOAuthHttpServerReplyHandler"><code class="details extra" translate="no">[explicit]</code> QOAuthHttpServerReplyHandler::<span class="name">QOAuthHttpServerReplyHandler</span>(<span class="type"><a href="../qtcore/qobject.html#QObject" translate="no">QObject</a></span> *<i>parent</i> = nullptr)</h3>
<p>Constructs a QOAuthHttpServerReplyHandler object using <i translate="no">parent</i> as a parent object. Calls <a href="qoauthhttpserverreplyhandler.html#listen" translate="no">listen</a>() with port <code translate="no">0</code> and address <a href="../qtnetwork/qhostaddress.html#SpecialAddress-enum" translate="no">LocalHost</a>.</p>
<p><b>See also </b><a href="qoauthhttpserverreplyhandler.html#listen" translate="no">listen</a>().</p>
<!-- @@@QOAuthHttpServerReplyHandler -->
<!-- $$$QOAuthHttpServerReplyHandler$$$QOAuthHttpServerReplyHandlerquint16QObject* -->
<h3 class="fn" translate="no" id="QOAuthHttpServerReplyHandler-1"><code class="details extra" translate="no">[explicit]</code> QOAuthHttpServerReplyHandler::<span class="name">QOAuthHttpServerReplyHandler</span>(<span class="type"><a href="../qtcore/qttypes.html#quint16-typedef" translate="no">quint16</a></span> <i>port</i>, <span class="type"><a href="../qtcore/qobject.html#QObject" translate="no">QObject</a></span> *<i>parent</i> = nullptr)</h3>
<p>Constructs a QOAuthHttpServerReplyHandler object using <i translate="no">parent</i> as a parent object. Calls <a href="qoauthhttpserverreplyhandler.html#listen" translate="no">listen</a>() with <i translate="no">port</i> and address <a href="../qtnetwork/qhostaddress.html#SpecialAddress-enum" translate="no">LocalHost</a>.</p>
<p><b>See also </b><a href="qoauthhttpserverreplyhandler.html#listen" translate="no">listen</a>().</p>
<!-- @@@QOAuthHttpServerReplyHandler -->
<!-- $$$QOAuthHttpServerReplyHandler$$$QOAuthHttpServerReplyHandlerconstQHostAddress&quint16QObject* -->
<h3 class="fn" translate="no" id="QOAuthHttpServerReplyHandler-2"><code class="details extra" translate="no">[explicit]</code> QOAuthHttpServerReplyHandler::<span class="name">QOAuthHttpServerReplyHandler</span>(const <span class="type"><a href="../qtnetwork/qhostaddress.html" translate="no">QHostAddress</a></span> &amp;<i>address</i>, <span class="type"><a href="../qtcore/qttypes.html#quint16-typedef" translate="no">quint16</a></span> <i>port</i>, <span class="type"><a href="../qtcore/qobject.html#QObject" translate="no">QObject</a></span> *<i>parent</i> = nullptr)</h3>
<p>Constructs a QOAuthHttpServerReplyHandler object using <i translate="no">parent</i> as a parent object. Calls <a href="qoauthhttpserverreplyhandler.html#listen" translate="no">listen</a>() with <i translate="no">address</i> and <i translate="no">port</i>.</p>
<p><b>See also </b><a href="qoauthhttpserverreplyhandler.html#listen" translate="no">listen</a>().</p>
<!-- @@@QOAuthHttpServerReplyHandler -->
<!-- $$$~QOAuthHttpServerReplyHandler[overload1]$$$~QOAuthHttpServerReplyHandler -->
<h3 class="fn" translate="no" id="dtor.QOAuthHttpServerReplyHandler"><code class="details extra" translate="no">[virtual noexcept]</code> QOAuthHttpServerReplyHandler::<span class="name">~QOAuthHttpServerReplyHandler</span>()</h3>
<p>Destroys the <a href="qoauthhttpserverreplyhandler.html" translate="no">QOAuthHttpServerReplyHandler</a> object. Stops listening for connections / redirections.</p>
<p><b>See also </b><a href="qoauthhttpserverreplyhandler.html#close" translate="no">close</a>().</p>
<!-- @@@~QOAuthHttpServerReplyHandler -->
<!-- $$$callbackHost[overload1]$$$callbackHost -->
<h3 class="fn" translate="no" id="callbackHost"><code class="details extra" translate="no">[since 6.9]</code> <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> QOAuthHttpServerReplyHandler::<span class="name">callbackHost</span>() const</h3>
<p>Returns the name that is used as the host component of the <a href="qabstractoauthreplyhandler.html#callback" translate="no">callback</a>() / <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-3.1.2">OAuth2 redirect_uri parameter</a>.</p>
<p>This function was introduced in Qt 6.9.</p>
<p><b>See also </b><a href="qoauthhttpserverreplyhandler.html#setCallbackHost" translate="no">setCallbackHost</a>().</p>
<!-- @@@callbackHost -->
<!-- $$$callbackPath[overload1]$$$callbackPath -->
<h3 class="fn" translate="no" id="callbackPath"><span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> QOAuthHttpServerReplyHandler::<span class="name">callbackPath</span>() const</h3>
<p>Returns the path that is used as the path component of the <a href="qabstractoauthreplyhandler.html#callback" translate="no">callback</a>() / <a href="https://datatracker.ietf.org/doc/html/rfc6749#section-3.1.2">OAuth2 redirect_uri parameter</a>.</p>
<p><b>See also </b><a href="qoauthhttpserverreplyhandler.html#setCallbackPath" translate="no">setCallbackPath</a>().</p>
<!-- @@@callbackPath -->
<!-- $$$callbackText[overload1]$$$callbackText -->
<h3 class="fn" translate="no" id="callbackText"><span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> QOAuthHttpServerReplyHandler::<span class="name">callbackText</span>() const</h3>
<p>Returns the text that is used in response to the redirection at the end of the authorization stage.</p>
<p>The text is wrapped in a simple HTML page, and displayed to the user by the browser / user-agent which did the redirection.</p>
<p>The default text is</p>
<pre class="cpp plain" translate="no">
 Callback received. Feel free to close this page.
</pre>
<p><b>See also </b><a href="qoauthhttpserverreplyhandler.html#setCallbackText" translate="no">setCallbackText</a>().</p>
<!-- @@@callbackText -->
<!-- $$$close[overload1]$$$close -->
<h3 class="fn" translate="no" id="close"><span class="type">void</span> QOAuthHttpServerReplyHandler::<span class="name">close</span>()</h3>
<p>Tells this handler to stop listening for connections / redirections.</p>
<p><b>See also </b><a href="qoauthhttpserverreplyhandler.html#listen" translate="no">listen</a>().</p>
<!-- @@@close -->
<!-- $$$isListening[overload1]$$$isListening -->
<h3 class="fn" translate="no" id="isListening"><span class="type">bool</span> QOAuthHttpServerReplyHandler::<span class="name">isListening</span>() const</h3>
<p>Returns <code translate="no">true</code> if this handler is currently listening, and <code translate="no">false</code> otherwise.</p>
<p><b>See also </b><a href="qoauthhttpserverreplyhandler.html#listen" translate="no">listen</a>() and <a href="qoauthhttpserverreplyhandler.html#close" translate="no">close</a>().</p>
<!-- @@@isListening -->
<!-- $$$listen[overload1]$$$listenconstQHostAddress&quint16 -->
<h3 class="fn" translate="no" id="listen"><span class="type">bool</span> QOAuthHttpServerReplyHandler::<span class="name">listen</span>(const <span class="type"><a href="../qtnetwork/qhostaddress.html" translate="no">QHostAddress</a></span> &amp;<i>address</i> = QHostAddress::Any, <span class="type"><a href="../qtcore/qttypes.html#quint16-typedef" translate="no">quint16</a></span> <i>port</i> = 0)</h3>
<p>Tells this handler to listen for incoming connections / redirections on <i translate="no">address</i> and <i translate="no">port</i>. Returns <code translate="no">true</code> if listening is successful, and <code translate="no">false</code> otherwise.</p>
<p>Active listening is only required when performing the initial authorization phase, typically initiated by a <a href="qoauth2authorizationcodeflow.html#grant" translate="no">QOAuth2AuthorizationCodeFlow::grant</a>() call.</p>
<p>It is recommended to close the listener after successful authorization. Listening is not needed for <a href="qoauth2authorizationcodeflow.html#requestAccessToken" translate="no">requesting access tokens</a> or refreshing them.</p>
<p>If this function is called with <a href="../qtnetwork/qhostaddress.html#SpecialAddress-enum" translate="no">Null</a> as the <i translate="no">address</i>, the handler will attempt to listen to <a href="../qtnetwork/qhostaddress.html#SpecialAddress-enum" translate="no">LocalHost</a>, and if that fails, <a href="../qtnetwork/qhostaddress.html#SpecialAddress-enum" translate="no">LocalHostIPv6</a>.</p>
<p>See also <a href="qoauthhttpserverreplyhandler.html#ipv4-and-ipv6" translate="no">IPv4 and IPv6</a>.</p>
<p><b>See also </b><a href="qoauthhttpserverreplyhandler.html#close" translate="no">close</a>(), <a href="qoauthhttpserverreplyhandler.html#isListening" translate="no">isListening</a>(), and <a href="../qtnetwork/qtcpserver.html#listen" translate="no">QTcpServer::listen</a>().</p>
<!-- @@@listen -->
<!-- $$$listen$$$listenconstQSslConfiguration&constQHostAddress&quint16 -->
<h3 class="fn" translate="no" id="listen-1"><span class="type">bool</span> QOAuthHttpServerReplyHandler::<span class="name">listen</span>(const <span class="type"><a href="../qtnetwork/qsslconfiguration.html" translate="no">QSslConfiguration</a></span> &amp;<i>configuration</i>, const <span class="type"><a href="../qtnetwork/qhostaddress.html" translate="no">QHostAddress</a></span> &amp;<i>address</i> = QHostAddress::Any, <span class="type"><a href="../qtcore/qttypes.html#quint16-typedef" translate="no">quint16</a></span> <i>port</i> = 0)</h3>
<p>Tells this handler to listen for incoming <code translate="no">https</code> connections / redirections on <i translate="no">address</i> and <i translate="no">port</i>. Returns <code translate="no">true</code> if listening is successful, and <code translate="no">false</code> otherwise.</p>
<p>See <a href="qoauthhttpserverreplyhandler.html#http-and-https-callbacks" translate="no">HTTP and HTTPS Callbacks</a> for further information.</p>
<p><b>See also </b><a href="qoauthhttpserverreplyhandler.html#listen" translate="no">listen</a>(const QHostAddress &amp;, quint16), <a href="qoauthhttpserverreplyhandler.html#close" translate="no">close</a>(), <a href="qoauthhttpserverreplyhandler.html#isListening" translate="no">isListening</a>(), <a href="../qtnetwork/qsslserver.html" translate="no">QSslServer</a>, and <a href="../qtnetwork/qtcpserver.html#listen" translate="no">QTcpServer::listen</a>().</p>
<!-- @@@listen -->
<!-- $$$port[overload1]$$$port -->
<h3 class="fn" translate="no" id="port"><span class="type"><a href="../qtcore/qttypes.html#quint16-typedef" translate="no">quint16</a></span> QOAuthHttpServerReplyHandler::<span class="name">port</span>() const</h3>
<p>Returns the port on which this handler is listening, otherwise returns 0.</p>
<p><b>See also </b><a href="qoauthhttpserverreplyhandler.html#listen" translate="no">listen</a>() and <a href="qoauthhttpserverreplyhandler.html#isListening" translate="no">isListening</a>().</p>
<!-- @@@port -->
<!-- $$$setCallbackHost[overload1]$$$setCallbackHostconstQString& -->
<h3 class="fn" translate="no" id="setCallbackHost"><code class="details extra" translate="no">[since 6.9]</code> <span class="type">void</span> QOAuthHttpServerReplyHandler::<span class="name">setCallbackHost</span>(const <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> &amp;<i>host</i>)</h3>
<p>Sets <i translate="no">host</i> to be used as the hostname component of the <a href="qabstractoauthreplyhandler.html#callback" translate="no">callback</a>(). Providing a non-empty <i translate="no">host</i> overrides the default behavior, see <a href="qoauthhttpserverreplyhandler.html#ipv4-and-ipv6" translate="no">IPv4 and IPv6</a>.</p>
<p>This function was introduced in Qt 6.9.</p>
<p><b>See also </b><a href="qoauthhttpserverreplyhandler.html#callbackHost" translate="no">callbackHost</a>().</p>
<!-- @@@setCallbackHost -->
<!-- $$$setCallbackPath[overload1]$$$setCallbackPathconstQString& -->
<h3 class="fn" translate="no" id="setCallbackPath"><span class="type">void</span> QOAuthHttpServerReplyHandler::<span class="name">setCallbackPath</span>(const <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> &amp;<i>path</i>)</h3>
<p>Sets <i translate="no">path</i> to be used as the path component of the <a href="qabstractoauthreplyhandler.html#callback" translate="no">callback</a>().</p>
<p><b>See also </b><a href="qoauthhttpserverreplyhandler.html#callbackPath" translate="no">callbackPath</a>().</p>
<!-- @@@setCallbackPath -->
<!-- $$$setCallbackText[overload1]$$$setCallbackTextconstQString& -->
<h3 class="fn" translate="no" id="setCallbackText"><span class="type">void</span> QOAuthHttpServerReplyHandler::<span class="name">setCallbackText</span>(const <span class="type"><a href="../qtcore/qstring.html" translate="no">QString</a></span> &amp;<i>text</i>)</h3>
<p>Sets <i translate="no">text</i> to be used in response to the redirection at the end of the authorization stage.</p>
<p><b>See also </b><a href="qoauthhttpserverreplyhandler.html#callbackText" translate="no">callbackText</a>().</p>
<!-- @@@setCallbackText -->
</div>
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <abbr title="Copyright">&copy;</abbr> 2024 <span translate="no">The Qt Company Ltd.</span>
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the <span translate="no">Free Software Foundation</span>.<br/>    <span translate="no">Qt</span> and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of <span translate="no">The Qt Company Ltd.</span> in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
