<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- proceduralmesh.cpp -->
  <meta name="description" content="Allows creation of Geometry from QML.">
  <title>ProceduralMesh QML Type | Qt Quick 3D | Qt 6.9.0</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li>Qt 6.9</li>
<li><a href="qtquick3d-index.html">Qt Quick 3D</a></li>
<li><a href="qtquick3d-qmlmodule.html" translate="no">QML Types</a></li>
<li><a href="qtquick3d-helpers-qmlmodule.html" translate="no">QtQuick3D.Helpers</a></li>
<li>ProceduralMesh</li>
<li id="buildversion"><a href="qtquick3d-index.html">Qt Quick 3D | Commercial or GPLv3</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#properties">Properties</a></li>
<li class="level1"><a href="#details">Detailed Description</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title" translate="no">ProceduralMesh QML Type</h1>
<!-- $$$ProceduralMesh-brief -->
<p>Allows creation of Geometry from QML. <a href="#details">More...</a></p>
<!-- @@@ProceduralMesh -->
<div class="table"><table class="alignedsummary requisites" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> Import Statement:</td><td class="memItemRight bottomAlign"> <code translate="no">import QtQuick3D.Helpers</code></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> Since:</td><td class="memItemRight bottomAlign"> Qt 6.6</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> Inherits:</td><td class="memItemRight bottomAlign"> <p><a href="qml-qtquick3d-geometry.html" translate="no">Geometry</a></p>
</td></tr>
</table></div>
<ul>
<li><a href="qml-qtquick3d-helpers-proceduralmesh-members.html">List of all members, including inherited members</a></li>
</ul>
<h2 id="properties">Properties</h2>
<ul>
<li class="fn" translate="no"><b><a href="qml-qtquick3d-helpers-proceduralmesh.html#binormals-prop" translate="no">binormals</a></b> : List&lt;QVector3D&gt;</li>
<li class="fn" translate="no"><b><a href="qml-qtquick3d-helpers-proceduralmesh.html#colors-prop" translate="no">colors</a></b> : List&lt;QVector4D&gt;</li>
<li class="fn" translate="no"><b><a href="qml-qtquick3d-helpers-proceduralmesh.html#indexes-prop" translate="no">indexes</a></b> : List&lt;int&gt;</li>
<li class="fn" translate="no"><b><a href="qml-qtquick3d-helpers-proceduralmesh.html#joints-prop" translate="no">joints</a></b> : List&lt;QVector4D&gt;</li>
<li class="fn" translate="no"><b><a href="qml-qtquick3d-helpers-proceduralmesh.html#normals-prop" translate="no">normals</a></b> : List&lt;QVector3D&gt;</li>
<li class="fn" translate="no"><b><a href="qml-qtquick3d-helpers-proceduralmesh.html#positions-prop" translate="no">positions</a></b> : List&lt;QVector3D&gt;</li>
<li class="fn" translate="no"><b><a href="qml-qtquick3d-helpers-proceduralmesh.html#primitiveMode-prop" translate="no">primitiveMode</a></b> : enumeration</li>
<li class="fn" translate="no"><b><a href="qml-qtquick3d-helpers-proceduralmesh.html#subsets-prop" translate="no">subsets</a></b> : List&lt;ProceduralMeshSubset&gt;</li>
<li class="fn" translate="no"><b><a href="qml-qtquick3d-helpers-proceduralmesh.html#tangents-prop" translate="no">tangents</a></b> : List&lt;QVector3D&gt;</li>
<li class="fn" translate="no"><b><a href="qml-qtquick3d-helpers-proceduralmesh.html#uv0s-prop" translate="no">uv0s</a></b> : List&lt;QVector2D&gt;</li>
<li class="fn" translate="no"><b><a href="qml-qtquick3d-helpers-proceduralmesh.html#uv1s-prop" translate="no">uv1s</a></b> : List&lt;QVector2D&gt;</li>
<li class="fn" translate="no"><b><a href="qml-qtquick3d-helpers-proceduralmesh.html#weights-prop" translate="no">weights</a></b> : List&lt;QVector4D&gt;</li>
</ul>
<!-- $$$ProceduralMesh-description -->
<h2 id="details">Detailed Description</h2>
<p>ProceduralMesh is a helper type that allows creation of Geometry instances from QML. The Geometry component is Abstract, and is usually created from C++.</p>
<pre class="qml" translate="no">
 component TorusMesh : ProceduralMesh {
     property real rings: 50
     property real segments: 50
     property real radius: 100.0
     property real tubeRadius: 10.0
     property var meshArrays: generateTorus(rings, segments, radius, tubeRadius)
     positions: meshArrays.verts
     normals: meshArrays.normals
     uv0s: meshArrays.uvs
     indexes: meshArrays.indices

     function generateTorus(rings: real, segments: real, radius: real, tubeRadius: real) {
         let verts = []
         let normals = []
         let uvs = []
         let indices = []

         for (let i = 0; i &lt;= rings; ++i) {
             for (let j = 0; j &lt;= segments; ++j) {
                 let u = i / rings * Math.PI * 2;
                 let v = j / segments * Math.PI * 2;

                 let centerX = radius * Math.cos(u);
                 let centerZ = radius * Math.sin(u);

                 let posX = centerX + tubeRadius * Math.cos(v) * Math.cos(u);
                 let posY = tubeRadius * Math.sin(v);
                 let posZ = centerZ + tubeRadius * Math.cos(v) * Math.sin(u);

                 verts.push(Qt.vector3d(posX, posY, posZ));

                 let normal = Qt.vector3d(posX - centerX, posY, posZ - centerZ).normalized();
                 normals.push(normal);

                 uvs.push(Qt.vector2d(i / rings, j / segments));
             }
         }

         for (let i = 0; i &lt; rings; ++i) {
             for (let j = 0; j &lt; segments; ++j) {
                 let a = (segments + 1) * i + j;
                 let b = (segments + 1) * (i + 1) + j;
                 let c = (segments + 1) * (i + 1) + j + 1;
                 let d = (segments + 1) * i + j + 1;

                 // Generate two triangles for each quad in the mesh
                 // Adjust order to be counter-clockwise
                 indices.push(a, d, b);
                 indices.push(b, d, c);
             }
         }
         return { verts: verts, normals: normals, uvs: uvs, indices: indices }
     }
 }
</pre>
<p>The above code defines a component TorusMesh that can be used as Geometry for use with a Model component. When the ring, segments, radius or tubeRadius properties are modified the geometry will be updated.</p>
<p>The ProceduralMesh component is not as flexible nor as performant as creating Geometry in C++, but makes up for it in convenience and simplicity. The properties are fixed attribute lists that when filled will automatically generate the necessary buffers.</p>
<!-- @@@ProceduralMesh -->
<h2>Property Documentation</h2>
<!-- $$$binormals -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tr valign="top" class="odd" id="binormals-prop">
<td class="tblQmlPropNode"><p>
<span class="name">binormals</span> : <span class="type">List</span>&lt;<span class="type">QVector3D</span>&gt;</p></td></tr>
</table></div></div>
<div class="qmldoc"><p>Holds the binormals attribute list.</p>
</div></div><!-- @@@binormals -->
<br/>
<!-- $$$colors -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tr valign="top" class="odd" id="colors-prop">
<td class="tblQmlPropNode"><p>
<span class="name">colors</span> : <span class="type">List</span>&lt;<span class="type">QVector4D</span>&gt;</p></td></tr>
</table></div></div>
<div class="qmldoc"><p>This property defines a list of vertex color values.</p>
</div></div><!-- @@@colors -->
<br/>
<!-- $$$indexes -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tr valign="top" class="odd" id="indexes-prop">
<td class="tblQmlPropNode"><p>
<span class="name">indexes</span> : <span class="type">List</span>&lt;<span class="type"><a href="../qtqml/qml-int.html" translate="no">int</a></span>&gt;</p></td></tr>
</table></div></div>
<div class="qmldoc"><p>This property defines a list of indexes into the attribute lists. If this list remains empty the vertex buffer values will be used directly.</p>
</div></div><!-- @@@indexes -->
<br/>
<!-- $$$joints -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tr valign="top" class="odd" id="joints-prop">
<td class="tblQmlPropNode"><p>
<span class="name">joints</span> : <span class="type">List</span>&lt;<span class="type">QVector4D</span>&gt;</p></td></tr>
</table></div></div>
<div class="qmldoc"><p>This property defines a list of joint indices for skinning.</p>
</div></div><!-- @@@joints -->
<br/>
<!-- $$$normals -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tr valign="top" class="odd" id="normals-prop">
<td class="tblQmlPropNode"><p>
<span class="name">normals</span> : <span class="type">List</span>&lt;<span class="type">QVector3D</span>&gt;</p></td></tr>
</table></div></div>
<div class="qmldoc"><p>Holds the normals attribute list.</p>
</div></div><!-- @@@normals -->
<br/>
<!-- $$$positions -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tr valign="top" class="odd" id="positions-prop">
<td class="tblQmlPropNode"><p>
<span class="name">positions</span> : <span class="type">List</span>&lt;<span class="type">QVector3D</span>&gt;</p></td></tr>
</table></div></div>
<div class="qmldoc"><p>The positions attribute list. If this list remains empty nothing no geometry will be generated.</p>
</div></div><!-- @@@positions -->
<br/>
<!-- $$$primitiveMode -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tr valign="top" class="odd" id="primitiveMode-prop">
<td class="tblQmlPropNode"><p>
<span class="name">primitiveMode</span> : <span class="type">enumeration</span> <code class="details extra" translate="no">[default: ProceduralMesh.Triangles]</code></p></td></tr>
</table></div></div>
<div class="qmldoc"><p>This property defines the primitive mode to use when rendering the geometry.</p>
<div class="table"><table class="valuelist"><tr valign="top" class="odd"><th class="tblConst">Constant</th><th class="tbldscr">Description</th></tr>
<tr><td class="topAlign"><code translate="no">ProceduralMesh.Points</code></td><td class="topAlign">The points primitive mode is used.</td></tr>
<tr><td class="topAlign"><code translate="no">ProceduralMesh.LineStrip</code></td><td class="topAlign">The line strip primitive mode is used.</td></tr>
<tr><td class="topAlign"><code translate="no">ProceduralMesh.Lines</code></td><td class="topAlign">The lines primitive mode is used.</td></tr>
<tr><td class="topAlign"><code translate="no">ProceduralMesh.TriangleStrip</code></td><td class="topAlign">The triangles strip primitive mode is used.</td></tr>
<tr><td class="topAlign"><code translate="no">ProceduralMesh.TriangleFan</code></td><td class="topAlign">The triangle fan primitive mode is used.</td></tr>
<tr><td class="topAlign"><code translate="no">ProceduralMesh.Triangles</code></td><td class="topAlign">The triangles primitive mode is used.</td></tr>
</table></div>
<div class="admonition note">
<p><b>Note: </b>Not all modes are supported on all rendering backends.</p>
</div>
</div></div><!-- @@@primitiveMode -->
<br/>
<!-- $$$subsets -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tr valign="top" class="odd" id="subsets-prop">
<td class="tblQmlPropNode"><p>
<span class="name">subsets</span> : <span class="type">List</span>&lt;<span class="type"><a href="qml-qtquick3d-helpers-proceduralmeshsubset.html" translate="no">ProceduralMeshSubset</a></span>&gt;</p></td></tr>
</table></div></div>
<div class="qmldoc"><p>This property defines a list of subsets to split the geometry data into. Each subset can have it's own material. The order of this array corresponds to the materials list of Model when using this geometry.</p>
<p>This property is optional and when empty results in a single subset.</p>
<div class="admonition note">
<p><b>Note: </b>Any subset that specifies values outside of the range of available vertex/index values will lead to that subset being ignored.</p>
</div>
</div></div><!-- @@@subsets -->
<br/>
<!-- $$$tangents -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tr valign="top" class="odd" id="tangents-prop">
<td class="tblQmlPropNode"><p>
<span class="name">tangents</span> : <span class="type">List</span>&lt;<span class="type">QVector3D</span>&gt;</p></td></tr>
</table></div></div>
<div class="qmldoc"><p>Holds the tangents attribute list.</p>
</div></div><!-- @@@tangents -->
<br/>
<!-- $$$uv0s -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tr valign="top" class="odd" id="uv0s-prop">
<td class="tblQmlPropNode"><p>
<span class="name">uv0s</span> : <span class="type">List</span>&lt;<span class="type">QVector2D</span>&gt;</p></td></tr>
</table></div></div>
<div class="qmldoc"><p>This property defines a list of uv coordinates for the first uv channel (uv0)</p>
</div></div><!-- @@@uv0s -->
<br/>
<!-- $$$uv1s -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tr valign="top" class="odd" id="uv1s-prop">
<td class="tblQmlPropNode"><p>
<span class="name">uv1s</span> : <span class="type">List</span>&lt;<span class="type">QVector2D</span>&gt;</p></td></tr>
</table></div></div>
<div class="qmldoc"><p>This property defines a list of uv coordinates for the second uv channel (uv1)</p>
</div></div><!-- @@@uv1s -->
<br/>
<!-- $$$weights -->
<div class="qmlitem"><div class="qmlproto" translate="no">
<div class="table"><table class="qmlname">
<tr valign="top" class="odd" id="weights-prop">
<td class="tblQmlPropNode"><p>
<span class="name">weights</span> : <span class="type">List</span>&lt;<span class="type">QVector4D</span>&gt;</p></td></tr>
</table></div></div>
<div class="qmldoc"><p>This property defines a list of joint weights for skinning.</p>
</div></div><!-- @@@weights -->
<br/>
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <abbr title="Copyright">&copy;</abbr> 2024 <span translate="no">The Qt Company Ltd.</span>
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the <span translate="no">Free Software Foundation</span>.<br/>    <span translate="no">Qt</span> and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of <span translate="no">The Qt Company Ltd.</span> in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
