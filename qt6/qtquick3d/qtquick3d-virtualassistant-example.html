<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- virtualassistant.qdoc -->
  <meta name="description" content="Qt Quick application that presents a 3D model of a virtual assistant with dynamic animations created using QML and timelines.">
  <title>Virtual Assistant | Qt Quick 3D | Qt 6.9.0</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li>Qt 6.9</li>
<li><a href="qtquick3d-index.html">Qt Quick 3D</a></li>
<li><a href="quick3d-examples.html">Qt Quick 3D Examples and Tutorials</a></li>
<li>Virtual Assistant</li>
<li id="buildversion"><a href="qtquick3d-index.html">Qt Quick 3D | Commercial or GPLv3</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#importing-3d-model">Importing 3D Model</a></li>
<li class="level1"><a href="#preparing-scene-environment">Preparing Scene Environment</a></li>
<li class="level1"><a href="#camera-options">Camera Options</a></li>
<li class="level1"><a href="#animations">Animations</a></li>
<li class="level2"><a href="#skeleton-animations">Skeleton Animations</a></li>
<li class="level2"><a href="#morph-target-animations">Morph Target Animations</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title">Virtual Assistant</h1>
<!-- $$$virtualassistant-brief -->
<p>Qt Quick application that presents a 3D model of a virtual assistant with dynamic animations created using QML and timelines.</p>
<!-- @@@virtualassistant -->
<!-- $$$virtualassistant-description -->
<div class="descr" id="details">
<p class="centerAlign"><img src="images/VirtualAssistantHome.png" alt="" /></p><p>The <i>Virtual Assistant</i> example demonstrates how to bring a 3D model of a virtual assistant to life through timeline animations, increasing user engagement and interaction.</p>
<h4 id="importing-3d-model">Importing 3D Model</h4>
<p>To load the model in Qt Design Studio, it is enough to import the .gltf file to the project. Qt Design Studio then automatically creates a QML file that represents the object. It also generates the necessary assets. Without Qt Design Studio, you must manually run the <a href="qtquick3d-tool-balsam.html">Balsam</a> tool. In this example, the generated QML file was modified to introduce the states, animations, and additional invisible models that allow picking specific parts of the Virtual Assistant.</p>
<h4 id="preparing-scene-environment">Preparing Scene Environment</h4>
<p>The scene uses HDR images to create a skybox and to provide natural lighting.</p>
<pre class="cpp" translate="no">
         <span class="name">environment</span>: <span class="name">ExtendedSceneEnvironment</span> {
             <span class="name">backgroundMode</span>: <span class="name">SceneEnvironment</span>.<span class="name">SkyBox</span>
             <span class="name">lightProbe</span>: <span class="name">Texture</span> { <span class="name">source</span>: <span class="name">Constants</span>.<span class="name">sceneName</span> }
             <span class="name">antialiasingMode</span>: <span class="name">SceneEnvironment</span>.<span class="name">MSAA</span>
             <span class="name">antialiasingQuality</span>: <span class="name">SceneEnvironment</span>.<span class="name">VeryHigh</span>
             <span class="name">fxaaEnabled</span>: <span class="number">true</span>
             <span class="name">probeExposure</span>: <span class="number">0.6</span>
             <span class="name">probeOrientation</span>: <span class="name">Qt</span>.<span class="name">vector3d</span>(<span class="number">0</span>, <span class="name">settingsPanel</span>.<span class="name">skyboxRotation</span>, <span class="number">0</span>)
             <span class="name">specularAAEnabled</span>: <span class="number">true</span>
             <span class="name">tonemapMode</span>: <span class="name">SceneEnvironment</span>.<span class="name">TonemapModeLinear</span>
             <span class="name">vignetteEnabled</span>: <span class="number">true</span>
             <span class="name">vignetteRadius</span>: <span class="number">0.15</span>
         }
</pre>
<h4 id="camera-options">Camera Options</h4>
<p>Camera properties can be changed from the Settings panel. You can manipulate the field of view (FOV) and skybox rotation using sliders. The checkbox enables an <a href="qml-qtquick3d-helpers-orbitcameracontroller.html" translate="no">OrbitCameraController</a> that allows you to also interactively change camera position and rotation.</p>
<h4 id="animations">Animations</h4>
<p>The animations are created using multiple Timeline timelines and Keyframe keyframes. Each Timeline is connected with a different state of the Virtual Assistant. When the state changes, the connected animations start playing immediately. At the end of each animation, the object returns to the default state and restores the default values, such as position and rotation of the model <a href="qml-qtquick3d-node.html" translate="no">nodes</a>. The animations change the properties values of the nodes in our skeleton and modify the weight of different <a href="qml-qtquick3d-morphtarget.html" translate="no">morph targets</a> to animate the face elements (eyes, mouth).</p>
<p>Use the buttons on the Animations panel to run the animations. You also click on specific model elements like hands, lower body, and face to activate animation related to that part of the model.</p>
<h5 id="skeleton-animations">Skeleton Animations</h5>
<ul>
<li>Entry animation</li>
<li>Exit animation</li>
<li>Exploring scene animation</li>
<li>Backflip animation</li>
<li>Low body bouncing animation</li>
<li>Right and left hand waving animation</li>
</ul>
<h5 id="morph-target-animations">Morph Target Animations</h5>
<ul>
<li>Face animations (Happy and Sad)</li>
</ul>
<p>Sample implementation of the waving animation on the model's left hand:</p>
<pre class="qml" translate="no">
 <span class="type">Timeline</span> {
     <span class="name">id</span>: <span class="name">leftHandWavingTimeline</span>
     <span class="name">animations</span>: [
         <span class="type">TimelineAnimation</span> {
             <span class="name">id</span>: <span class="name">leftHandWavingAnimation</span>
             <span class="name">onFinished</span>: <span class="name">node</span>.<span class="name">restoreDefaults</span>()
             <span class="name">running</span>: <span class="number">false</span>
             <span class="name">loops</span>: <span class="number">1</span>
             <span class="name">duration</span>: <span class="number">2000</span>
             <span class="name">to</span>: <span class="number">2000</span>
             <span class="name">from</span>: <span class="number">0</span>
         }
     ]
     <span class="name">startFrame</span>: <span class="number">0</span>
     <span class="name">endFrame</span>: <span class="number">2000</span>
     <span class="name">enabled</span>: <span class="number">false</span>

     <span class="type">KeyframeGroup</span> {
         <span class="name">target</span>: <span class="name">hand_l</span>
         <span class="name">property</span>: <span class="string">&quot;x&quot;</span>
         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">2.89</span>
             <span class="name">frame</span>: <span class="number">400</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">2.89</span>
             <span class="name">frame</span>: <span class="number">1600</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">1.89</span>
             <span class="name">frame</span>: <span class="number">2000</span>
         }
     }

     <span class="type">KeyframeGroup</span> {
         <span class="name">target</span>: <span class="name">hand_l</span>
         <span class="name">property</span>: <span class="string">&quot;y&quot;</span>
         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">1</span>
             <span class="name">frame</span>: <span class="number">400</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">1</span>
             <span class="name">frame</span>: <span class="number">1600</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">0.5</span>
             <span class="name">frame</span>: <span class="number">2000</span>
         }
     }

     <span class="type">KeyframeGroup</span> {
         <span class="name">target</span>: <span class="name">hand_l</span>
         <span class="name">property</span>: <span class="string">&quot;z&quot;</span>
         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">1</span>
             <span class="name">frame</span>: <span class="number">400</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">1</span>
             <span class="name">frame</span>: <span class="number">1600</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: -<span class="number">0.1</span>
             <span class="name">frame</span>: <span class="number">2000</span>
         }
     }

     <span class="type">KeyframeGroup</span> {
         <span class="name">target</span>: <span class="name">hand_l</span>
         <span class="name">property</span>: <span class="string">&quot;eulerRotation.x&quot;</span>
         <span class="type">Keyframe</span> {
             <span class="name">value</span>: -<span class="number">15</span>
             <span class="name">frame</span>: <span class="number">400</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: -<span class="number">5</span>
             <span class="name">frame</span>: <span class="number">700</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: -<span class="number">15</span>
             <span class="name">frame</span>: <span class="number">1000</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: -<span class="number">5</span>
             <span class="name">frame</span>: <span class="number">1300</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: -<span class="number">15</span>
             <span class="name">frame</span>: <span class="number">1600</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: -<span class="number">0.18</span>
             <span class="name">frame</span>: <span class="number">2000</span>
         }
     }

     <span class="type">KeyframeGroup</span> {
         <span class="name">target</span>: <span class="name">hand_l</span>
         <span class="name">property</span>: <span class="string">&quot;eulerRotation.y&quot;</span>
         <span class="type">Keyframe</span> {
             <span class="name">value</span>: -<span class="number">15</span>
             <span class="name">frame</span>: <span class="number">400</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: -<span class="number">30</span>
             <span class="name">frame</span>: <span class="number">1600</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: -<span class="number">145</span>
             <span class="name">frame</span>: <span class="number">2000</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: -<span class="number">40</span>
             <span class="name">frame</span>: <span class="number">700</span>
         }
     }

     <span class="type">KeyframeGroup</span> {
         <span class="name">target</span>: <span class="name">hand_l</span>
         <span class="name">property</span>: <span class="string">&quot;eulerRotation.z&quot;</span>
         <span class="type">Keyframe</span> {
             <span class="name">value</span>: -<span class="number">88</span>
             <span class="name">frame</span>: <span class="number">400</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: -<span class="number">30</span>
             <span class="name">frame</span>: <span class="number">700</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: -<span class="number">86.05</span>
             <span class="name">frame</span>: <span class="number">1000</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: -<span class="number">30</span>
             <span class="name">frame</span>: <span class="number">1300</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: -<span class="number">86.05</span>
             <span class="name">frame</span>: <span class="number">1600</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: -<span class="number">178.92</span>
             <span class="name">frame</span>: <span class="number">2000</span>
         }
     }

     <span class="type">KeyframeGroup</span> {
         <span class="name">target</span>: <span class="name">morphTarget38</span>
         <span class="name">property</span>: <span class="string">&quot;weight&quot;</span>
         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">1</span>
             <span class="name">frame</span>: <span class="number">0</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">0.25</span>
             <span class="name">frame</span>: <span class="number">400</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">0.25</span>
             <span class="name">frame</span>: <span class="number">1600</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">1</span>
             <span class="name">frame</span>: <span class="number">2000</span>
         }
     }

     <span class="type">KeyframeGroup</span> {
         <span class="name">target</span>: <span class="name">morphTarget42</span>
         <span class="name">property</span>: <span class="string">&quot;weight&quot;</span>
         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">0</span>
             <span class="name">frame</span>: <span class="number">2000</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">0.75</span>
             <span class="name">frame</span>: <span class="number">1600</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">0.75</span>
             <span class="name">frame</span>: <span class="number">400</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">0</span>
             <span class="name">frame</span>: <span class="number">0</span>
         }
     }

     <span class="type">KeyframeGroup</span> {
         <span class="name">target</span>: <span class="name">morphTarget27</span>
         <span class="name">property</span>: <span class="string">&quot;weight&quot;</span>
         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">0</span>
             <span class="name">frame</span>: <span class="number">0</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">1</span>
             <span class="name">frame</span>: <span class="number">400</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">1</span>
             <span class="name">frame</span>: <span class="number">1600</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">0</span>
             <span class="name">frame</span>: <span class="number">2000</span>
         }
     }

     <span class="type">KeyframeGroup</span> {
         <span class="name">target</span>: <span class="name">morphTarget28</span>
         <span class="name">property</span>: <span class="string">&quot;weight&quot;</span>
         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">1</span>
             <span class="name">frame</span>: <span class="number">2000</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">0</span>
             <span class="name">frame</span>: <span class="number">1600</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">0</span>
             <span class="name">frame</span>: <span class="number">400</span>
         }

         <span class="type">Keyframe</span> {
             <span class="name">value</span>: <span class="number">1</span>
             <span class="name">frame</span>: <span class="number">0</span>
         }
     }
 }
</pre>
<p><a href="https://code.qt.io/cgit/qt/qtquick3d.git/tree/examples/quick3d/virtualassistant?h=6.9">Example project @ code.qt.io</a></p>
</div>
<!-- @@@virtualassistant -->
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <abbr title="Copyright">&copy;</abbr> 2024 <span translate="no">The Qt Company Ltd.</span>
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the <span translate="no">Free Software Foundation</span>.<br/>    <span translate="no">Qt</span> and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of <span translate="no">The Qt Company Ltd.</span> in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
