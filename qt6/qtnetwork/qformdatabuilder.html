<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
<!-- qformdatabuilder.cpp -->
  <meta name="description" content="The QFormDataBuilder class is a convenience class to simplify the construction of QHttpMultiPart objects.">
  <title>QFormDataBuilder Class | Qt Network | Qt 6.9.0</title>
  <link rel="stylesheet" type="text/css" href="style/offline-simple.css" />
  <script type="text/javascript">
    document.getElementsByTagName("link").item(0).setAttribute("href", "style/offline.css");
    // loading style sheet breaks anchors that were jumped to before
    // so force jumping to anchor again
    setTimeout(function() {
        var anchor = location.hash;
        // need to jump to different anchor first (e.g. none)
        location.hash = "#";
        setTimeout(function() {
            location.hash = anchor;
        }, 0);
    }, 0);
  </script>
</head>
<body>
<div class="header" id="qtdocheader">
    <div class="main">
    <div class="main-rounded">
        <div class="navigationbar">
        <ul>
<li>Qt 6.9</li>
<li><a href="qtnetwork-index.html">Qt Network</a></li>
<li><a href="qtnetwork-module.html" translate="no">C++ Classes</a></li>
<li>QFormDataBuilder</li>
<li id="buildversion"><a href="qtnetwork-index.html">Qt 6.9.0 Reference Documentation</a></li>
    </ul>
    </div>
</div>
<div class="content">
<div class="line">
<div class="content mainContent">
<div class="sidebar">
<div class="toc">
<h3 id="toc">Contents</h3>
<ul>
<li class="level1"><a href="#public-types">Public Types</a></li>
<li class="level1"><a href="#public-functions">Public Functions</a></li>
<li class="level1"><a href="#details">Detailed Description</a></li>
</ul>
</div>
<div class="sidebar-content" id="sidebar-content"></div></div>
<h1 class="title" translate="no">QFormDataBuilder Class</h1>
<!-- $$$QFormDataBuilder-brief -->
<p>The QFormDataBuilder class is a convenience class to simplify the construction of <a href="qhttpmultipart.html" translate="no">QHttpMultiPart</a> objects. <a href="#details">More...</a></p>
<!-- @@@QFormDataBuilder -->
<div class="table"><table class="alignedsummary requisites" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> Header:</td><td class="memItemRight bottomAlign"> <code translate="no">#include &lt;QFormDataBuilder&gt;</code></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> CMake:</td><td class="memItemRight bottomAlign"> <code translate="no">find_package(Qt6 REQUIRED COMPONENTS Network)</code><br/>
<code translate="no">target_link_libraries(mytarget PRIVATE Qt6::Network)</code></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> qmake:</td><td class="memItemRight bottomAlign"> <code translate="no">QT += network</code></td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> Since:</td><td class="memItemRight bottomAlign"> Qt 6.8</td></tr>
</table></div>
<ul>
<li><a href="qformdatabuilder-members.html">List of all members, including inherited members</a></li>
<li>QFormDataBuilder is part of <a href="network.html">Network Programming API</a> and <a href="../qtcore/shared.html">Implicitly Shared Classes</a>.</li>
</ul>
<h2 id="public-types">Public Types</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> enum class </td><td class="memItemRight bottomAlign"><b><a href="qformdatabuilder.html#Option-enum" translate="no">Option</a></b> { Default, OmitRfc8187EncodedFilename, UseRfc7578PercentEncodedFilename, PreferLatin1EncodedFilename, StrictRfc7578 }</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> flags </td><td class="memItemRight bottomAlign"><b><a href="qformdatabuilder.html#Option-enum" translate="no">Options</a></b></td></tr>
</table></div>
<h2 id="public-functions">Public Functions</h2>
<div class="table"><table class="alignedsummary" translate="no">
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qformdatabuilder.html#QFormDataBuilder" translate="no">QFormDataBuilder</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qformdatabuilder.html#QFormDataBuilder-1" translate="no">QFormDataBuilder</a></b>(QFormDataBuilder &amp;&amp;<i>other</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> </td><td class="memItemRight bottomAlign"><b><a href="qformdatabuilder.html#dtor.QFormDataBuilder" translate="no">~QFormDataBuilder</a></b>()</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> std::unique_ptr&lt;QHttpMultiPart&gt; </td><td class="memItemRight bottomAlign"><b><a href="qformdatabuilder.html#buildMultiPart" translate="no">buildMultiPart</a></b>(QFormDataBuilder::Options <i>options</i> = {})</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QFormDataPartBuilder </td><td class="memItemRight bottomAlign"><b><a href="qformdatabuilder.html#part" translate="no">part</a></b>(QAnyStringView <i>name</i>)</td></tr>
<tr><td class="memItemLeft rightAlign topAlign"> QFormDataBuilder &amp;</td><td class="memItemRight bottomAlign"><b><a href="qformdatabuilder.html#operator-eq" translate="no">operator=</a></b>(QFormDataBuilder &amp;&amp;<i>other</i>)</td></tr>
</table></div>
<!-- $$$QFormDataBuilder-description -->
<div class="descr">
<h2 id="details">Detailed Description</h2>
<p>The QFormDataBuilder class can be used to build a <a href="qhttpmultipart.html" translate="no">QHttpMultiPart</a> object with the content type set to be FormDataType by default.</p>
<p>The snippet below demonstrates how to build a multipart message with QFormDataBuilder:</p>
<pre class="cpp" translate="no">
 <span class="type"><a href="qformdatabuilder.html#QFormDataBuilder" translate="no">QFormDataBuilder</a></span> builder;
 <span class="type"><a href="../qtcore/qfile.html" translate="no">QFile</a></span> image(u<span class="string">&quot;../../pic.png&quot;</span>_s); image<span class="operator">.</span>open(<span class="type"><a href="../qtcore/qfile.html" translate="no">QFile</a></span><span class="operator">::</span>ReadOnly);
 <span class="type"><a href="../qtcore/qfile.html" translate="no">QFile</a></span> mask(u<span class="string">&quot;../../mask.png&quot;</span>_s); mask<span class="operator">.</span>open(<span class="type"><a href="../qtcore/qfile.html" translate="no">QFile</a></span><span class="operator">::</span>ReadOnly);

 builder<span class="operator">.</span>part(<span class="string">&quot;image&quot;</span>_L1)<span class="operator">.</span>setBodyDevice(<span class="operator">&amp;</span>image<span class="operator">,</span> <span class="string">&quot;the actual image&quot;</span>);
 builder<span class="operator">.</span>part(<span class="string">&quot;mask&quot;</span>_L1)<span class="operator">.</span>setBodyDevice(<span class="operator">&amp;</span>mask<span class="operator">,</span> <span class="string">&quot;the mask image&quot;</span>);
 builder<span class="operator">.</span>part(<span class="string">&quot;prompt&quot;</span>_L1)<span class="operator">.</span>setBody(<span class="string">&quot;Lobster wearing a beret&quot;</span>);
 builder<span class="operator">.</span>part(<span class="string">&quot;n&quot;</span>_L1)<span class="operator">.</span>setBody(<span class="string">&quot;2&quot;</span>);
 builder<span class="operator">.</span>part(<span class="string">&quot;size&quot;</span>_L1)<span class="operator">.</span>setBody(<span class="string">&quot;512x512&quot;</span>);

 std<span class="operator">::</span>unique_ptr<span class="operator">&lt;</span><span class="type"><a href="qhttpmultipart.html" translate="no">QHttpMultiPart</a></span><span class="operator">&gt;</span> mp <span class="operator">=</span> builder<span class="operator">.</span>buildMultiPart();
</pre>
</div>
<p><b>See also </b><a href="qhttppart.html" translate="no">QHttpPart</a>, <a href="qhttpmultipart.html" translate="no">QHttpMultiPart</a>, and <a href="qformdatapartbuilder.html" translate="no">QFormDataPartBuilder</a>.</p>
<!-- @@@QFormDataBuilder -->
<div class="types">
<h2>Member Type Documentation</h2>
<!-- $$$Option$$$Default$$$OmitRfc8187EncodedFilename$$$UseRfc7578PercentEncodedFilename$$$PreferLatin1EncodedFilename$$$StrictRfc7578 -->
<h3 class="flags" id="Option-enum">enum class QFormDataBuilder::<span class="name">Option</span><br/>flags QFormDataBuilder::<span class="name">Options</span></h3>
<p>Options controlling <a href="qformdatabuilder.html#buildMultiPart" translate="no">buildMultiPart</a>().</p>
<p>Several current RFCs disagree on how, exactly, to format <code translate="no">multipart/form-data</code>. Instead of hard-coding any one RFC, these options give you control over which RFC to follow.</p>
<div class="table"><table class="valuelist"><tr valign="top" class="odd"><th class="tblConst">Constant</th><th class="tblval">Value</th><th class="tbldscr">Description</th></tr>
<tr><td class="topAlign"><code translate="no">QFormDataBuilder::Option::Default</code></td><td class="topAlign tblval"><code translate="no">0x00</code></td><td class="topAlign">The default values, designed to maximize interoperability in general. All options named below are off.</td></tr>
<tr><td class="topAlign"><code translate="no">QFormDataBuilder::Option::OmitRfc8187EncodedFilename</code></td><td class="topAlign tblval"><code translate="no">0x01</code></td><td class="topAlign">When a body-part's file-name contains non-US-ASCII characters, <a href="https://datatracker.ietf.org/doc/html/rfc6266#section-4.3">RFC 6266 Section 4.3</a> suggests to use <a href="https://datatracker.ietf.org/doc/html/rfc8187">RFC 8187</a>-style encoding (<code translate="no">filename*=utf-8''...</code>). The more recent <a href="https://datatracker.ietf.org/doc/html/rfc7578#section-4.2">RFC 7578 Section 4.2</a>, however, bans the use of that mechanism. Both RFCs are current as of this writing, so this option allows you to choose which one to follow. The default is to include the RFC 8187-encoded <code translate="no">filename*</code> alongside the unencoded <code translate="no">filename</code>, as suggested by RFC 6266.</td></tr>
<tr><td class="topAlign"><code translate="no">QFormDataBuilder::Option::UseRfc7578PercentEncodedFilename</code></td><td class="topAlign tblval"><code translate="no">0x02</code></td><td class="topAlign">When a body-part's file-name contains non-US-ASCII characters, <a href="https://datatracker.ietf.org/doc/html/rfc7578#section-4.2">RFC 7578 Section 4.2</a> suggests to use percent-encoding of the octets of the UTF-8-encoded file-name. It goes on to note that many implementations, however, do <i>not</i> percent-encode the UTF-8-encoded file-name, but just emit &quot;raw&quot; UTF-8 (with <code translate="no">&quot;</code> and <code translate="no">\</code> escaped using <code translate="no">\</code>). This is the default of <a href="qformdatabuilder.html" translate="no">QFormDataBuilder</a>, too.</td></tr>
<tr><td class="topAlign"><code translate="no">QFormDataBuilder::Option::PreferLatin1EncodedFilename</code></td><td class="topAlign tblval"><code translate="no">0x04</code></td><td class="topAlign"><a href="https://datatracker.ietf.org/doc/html/rfc5987#section-3.2">RFC 5987 Section 3.2</a> required recipients to support ISO-8859-1 (&quot;Latin-1&quot;) encoding. When a body-part's file-name contains non-US-ASCII characters that, however, fit into Latin-1, this option prefers to use ISO-8859-1 encoding over UTF-8. The more recent {https://datatracker.ietf.org/doc/html/rfc8187#appendix-A}{RFC 8187} no longer requires ISO-8859-1 support, so the default is to send all non-US-ASCII file-names in UTF-8 encoding instead.</td></tr>
<tr><td class="topAlign"><code translate="no">QFormDataBuilder::Option::StrictRfc7578</code></td><td class="topAlign tblval"><code translate="no">OmitRfc8187EncodedFilename | UseRfc7578PercentEncodedFilename</code></td><td class="topAlign">This option combines other options to select strict <a href="https://datatracker.ietf.org/doc/html/rfc7578">RFC 7578</a> compliance.</td></tr>
</table></div>
<p>The Options type is a typedef for <a href="../qtcore/qflags.html">QFlags</a>&lt;Option&gt;. It stores an OR combination of Option values.</p>
<!-- @@@Option -->
</div>
<div class="func">
<h2>Member Function Documentation</h2>
<!-- $$$QFormDataBuilder[overload1]$$$QFormDataBuilder -->
<h3 class="fn" translate="no" id="QFormDataBuilder">QFormDataBuilder::<span class="name">QFormDataBuilder</span>()</h3>
<p>Constructs an empty QFormDataBuilder object.</p>
<!-- @@@QFormDataBuilder -->
<!-- $$$QFormDataBuilder$$$QFormDataBuilderQFormDataBuilder&& -->
<h3 class="fn" translate="no" id="QFormDataBuilder-1"><code class="details extra" translate="no">[noexcept]</code> QFormDataBuilder::<span class="name">QFormDataBuilder</span>(<span class="type"><a href="qformdatabuilder.html#QFormDataBuilder" translate="no">QFormDataBuilder</a></span> &amp;&amp;<i>other</i>)</h3>
<p>Move-constructs a QFormDataBuilder instance, making it point at the same object that <i translate="no">other</i> was pointing to.</p>
<!-- @@@QFormDataBuilder -->
<!-- $$$~QFormDataBuilder[overload1]$$$~QFormDataBuilder -->
<h3 class="fn" translate="no" id="dtor.QFormDataBuilder"><code class="details extra" translate="no">[noexcept]</code> QFormDataBuilder::<span class="name">~QFormDataBuilder</span>()</h3>
<p>Destroys the <a href="qformdatabuilder.html" translate="no">QFormDataBuilder</a> object.</p>
<!-- @@@~QFormDataBuilder -->
<!-- $$$buildMultiPart[overload1]$$$buildMultiPartQFormDataBuilder::Options -->
<h3 class="fn" translate="no" id="buildMultiPart"><span class="type">std::unique_ptr</span>&lt;<span class="type"><a href="qhttpmultipart.html" translate="no">QHttpMultiPart</a></span>&gt; QFormDataBuilder::<span class="name">buildMultiPart</span>(<span class="type"><a href="qformdatabuilder.html#Option-enum" translate="no">QFormDataBuilder::Options</a></span> <i>options</i> = {})</h3>
<p>Constructs and returns a pointer to a QHttpMultipart object constructed according to <i translate="no">options</i>.</p>
<p><b>See also </b><a href="qhttpmultipart.html" translate="no">QHttpMultiPart</a>.</p>
<!-- @@@buildMultiPart -->
<!-- $$$part[overload1]$$$partQAnyStringView -->
<h3 class="fn" translate="no" id="part"><span class="type"><a href="qformdatapartbuilder.html" translate="no">QFormDataPartBuilder</a></span> QFormDataBuilder::<span class="name">part</span>(<span class="type"><a href="../qtcore/qanystringview.html" translate="no">QAnyStringView</a></span> <i>name</i>)</h3>
<p>Returns a newly-constructed <a href="qformdatapartbuilder.html" translate="no">QFormDataPartBuilder</a> object using <i translate="no">name</i> as the form-data's <code translate="no">name</code> parameter. The object is valid for as long as the associated <a href="qformdatabuilder.html" translate="no">QFormDataBuilder</a> has not been destroyed.</p>
<p>Limiting <i translate="no">name</i> characters to US-ASCII is <a href="https://datatracker.ietf.org/doc/html/rfc7578#section-5.1.1">strongly recommended</a> for interoperability reasons.</p>
<p><b>See also </b><a href="qformdatapartbuilder.html" translate="no">QFormDataPartBuilder</a> and <a href="qhttppart.html" translate="no">QHttpPart</a>.</p>
<!-- @@@part -->
<!-- $$$operator=[overload1]$$$operator=QFormDataBuilder&& -->
<h3 class="fn" translate="no" id="operator-eq"><code class="details extra" translate="no">[noexcept]</code> <span class="type"><a href="qformdatabuilder.html#QFormDataBuilder" translate="no">QFormDataBuilder</a></span> &amp;QFormDataBuilder::<span class="name">operator=</span>(<span class="type"><a href="qformdatabuilder.html#QFormDataBuilder" translate="no">QFormDataBuilder</a></span> &amp;&amp;<i>other</i>)</h3>
<p>Move-assigns <i translate="no">other</i> to this <a href="qformdatabuilder.html" translate="no">QFormDataBuilder</a> instance.</p>
<!-- @@@operator= -->
</div>
        </div>
       </div>
   </div>
   </div>
</div>
<div class="footer">
   <p>
   <abbr title="Copyright">&copy;</abbr> 2024 <span translate="no">The Qt Company Ltd.</span>
   Documentation contributions included herein are the copyrights of
   their respective owners.<br/>    The documentation provided herein is licensed under the terms of the    <a href="http://www.gnu.org/licenses/fdl.html">GNU Free Documentation    License version 1.3</a> as published by the <span translate="no">Free Software Foundation</span>.<br/>    <span translate="no">Qt</span> and respective logos are <a href="https://doc.qt.io/qt/trademarks.html">    trademarks</a> of <span translate="no">The Qt Company Ltd.</span> in Finland and/or other countries
   worldwide. All other trademarks are property of their respective owners. </p>
</div>
</body>
</html>
